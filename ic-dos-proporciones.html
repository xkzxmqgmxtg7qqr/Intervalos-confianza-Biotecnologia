<div class="card">
                <h2>üìâ IC para Diferencia de Dos Proporciones</h2>
                
                <h3>üìê F√≥rmula</h3>
                <div class="formula-box">
                    <p>\[IC = (\hat{p}_1 - \hat{p}_2) \pm z_{\alpha/2} \cdot \sqrt{\frac{\hat{p}_1(1-\hat{p}_1)}{n_1} + \frac{\hat{p}_2(1-\hat{p}_2)}{n_2}}\]</p>
                    <p>Donde:</p>
                    <ul>
                        <li>\(\hat{p}_1 = \frac{x_1}{n_1}\) = Proporci√≥n muestral del grupo 1</li>
                        <li>\(\hat{p}_2 = \frac{x_2}{n_2}\) = Proporci√≥n muestral del grupo 2</li>
                        <li>x‚ÇÅ, x‚ÇÇ = N√∫mero de √©xitos en cada grupo</li>
                        <li>n‚ÇÅ, n‚ÇÇ = Tama√±os de muestra</li>
                    </ul>
                    
                    <h4>Condiciones de validez:</h4>
                    <ul>
                        <li>n‚ÇÅ¬∑pÃÇ‚ÇÅ ‚â• 10, n‚ÇÅ¬∑(1-pÃÇ‚ÇÅ) ‚â• 10</li>
                        <li>n‚ÇÇ¬∑pÃÇ‚ÇÇ ‚â• 10, n‚ÇÇ¬∑(1-pÃÇ‚ÇÇ) ‚â• 10</li>
                        <li>Muestras independientes</li>
                    </ul>
                </div>
                
                <h3>üß¨ Ejemplo 1: Comparaci√≥n de M√©todos de Transfecci√≥n</h3>
                <div class="example-box">
                    <h4>Contexto:</h4>
                    <p>Un laboratorio compara dos m√©todos de transfecci√≥n de c√©lulas HEK293 con un pl√°smido reportero GFP:</p>
                    <ul>
                        <li><strong>M√©todo A (Lipofectamina):</strong> 180 c√©lulas transfectadas, 144 expresan GFP</li>
                        <li><strong>M√©todo B (Electroporaci√≥n):</strong> 200 c√©lulas transfectadas, 174 expresan GFP</li>
                    </ul>
                    <p><strong>Objetivo:</strong> Construir IC 95% para la diferencia de eficiencias (p_B - p_A)</p>
                    
                    <h4>Soluci√≥n Paso a Paso:</h4>
                    <p><strong>Paso 1:</strong> Calcular proporciones muestrales</p>
                    <p>\[\hat{p}_A = \frac{144}{180} = 0.800 \quad (80.0\%)\]</p>
                    <p>\[\hat{p}_B = \frac{174}{200} = 0.870 \quad (87.0\%)\]</p>
                    
                    <p><strong>Paso 2:</strong> Verificar condiciones</p>
                    <ul>
                        <li>M√©todo A: 180√ó0.80 = 144 ‚â• 10 ‚úì,  180√ó0.20 = 36 ‚â• 10 ‚úì</li>
                        <li>M√©todo B: 200√ó0.87 = 174 ‚â• 10 ‚úì,  200√ó0.13 = 26 ‚â• 10 ‚úì</li>
                    </ul>
                    
                    <p><strong>Paso 3:</strong> Calcular diferencia</p>
                    <p>\[\hat{p}_B - \hat{p}_A = 0.870 - 0.800 = 0.070 \quad (7.0\%)\]</p>
                    
                    <p><strong>Paso 4:</strong> Calcular error est√°ndar</p>
                    <p>\[SE = \sqrt{\frac{0.80 \times 0.20}{180} + \frac{0.87 \times 0.13}{200}}\]</p>
                    <p>\[SE = \sqrt{0.000889 + 0.000566} = \sqrt{0.001455} = 0.0381\]</p>
                    
                    <p><strong>Paso 5:</strong> Valor cr√≠tico y margen de error</p>
                    <p>z<sub>0.025</sub> = 1.96</p>
                    <p>ME = 1.96 √ó 0.0381 = 0.0747</p>
                    
                    <p><strong>Paso 6:</strong> Construir IC</p>
                    <p>\[IC_{95\%} = [0.070 - 0.0747, 0.070 + 0.0747]\]</p>
                    <p><strong>IC 95% = [-0.0047, 0.1447]</strong></p>
                    <p>En porcentaje: <strong>[-0.47%, 14.47%]</strong></p>
                    
                    <h4>‚úÖ Interpretaci√≥n:</h4>
                    <p>Con 95% de confianza, la diferencia en eficiencia de transfecci√≥n (Electroporaci√≥n - Lipofectamina) est√° entre -0.47% y 14.47%.</p>
                    <p><strong>Conclusi√≥n:</strong> Como el intervalo incluye el cero, no hay evidencia estad√≠stica concluyente de que la electroporaci√≥n sea significativamente mejor que lipofectamina al 95% de confianza, aunque la electroporaci√≥n muestra una tendencia favorable (7% mayor en la muestra).</p>
                </div>
                
                <h3>ü¶† Ejemplo 2: Tasa de Contaminaci√≥n en Biorreactores</h3>
                <div class="example-box">
                    <h4>Contexto:</h4>
                    <p>Una planta de producci√≥n biofarmac√©utica compara la tasa de contaminaci√≥n bacteriana en dos tipos de biorreactores:</p>
                    <ul>
                        <li><strong>Biorreactor Tipo A:</strong> 250 lotes, 18 contaminados ‚Üí pÃÇ_A = 0.072 (7.2%)</li>
                        <li><strong>Biorreactor Tipo B:</strong> 300 lotes, 12 contaminados ‚Üí pÃÇ_B = 0.040 (4.0%)</li>
                    </ul>
                    
                    <h4>Soluci√≥n:</h4>
                    <p>Diferencia: pÃÇ_A - pÃÇ_B = 0.072 - 0.040 = 0.032 (3.2%)</p>
                    <p>\[SE = \sqrt{\frac{0.072 \times 0.928}{250} + \frac{0.040 \times 0.960}{300}} = 0.0197\]</p>
                    <p>ME = 1.96 √ó 0.0197 = 0.0386</p>
                    <p><strong>IC 95% = [-0.0066, 0.0706]</strong> o <strong>[-0.66%, 7.06%]</strong></p>
                    
                    <h4>‚úÖ Interpretaci√≥n:</h4>
                    <p>Con 95% de confianza, la diferencia en tasa de contaminaci√≥n (Tipo A - Tipo B) est√° entre -0.66% y 7.06%.</p>
                    <p><strong>Decisi√≥n pr√°ctica:</strong> Aunque el IC incluye cero (no significancia estad√≠stica estricta), el Tipo B muestra menor contaminaci√≥n. Se recomienda an√°lisis de costo-beneficio considerando que el Tipo B podr√≠a reducir hasta 7% la contaminaci√≥n.</p>
                </div>
                
                <h3>üíª C√≥digo Python para IC de Diferencia de Proporciones</h3>
                <div class="code-block"><pre><code class="language-python">import numpy as np
from scipy import stats
from statsmodels.stats.proportion import confint_proportions_2indep

# Datos de transfecci√≥n
n1, x1 = 180, 144  # Lipofectamina
n2, x2 = 200, 174  # Electroporaci√≥n

p1 = x1 / n1
p2 = x2 / n2
diff = p2 - p1

print("‚ïê"*60)
print("IC PARA DIFERENCIA DE PROPORCIONES")
print("‚ïê"*60)
print(f"\nM√©todo A (Lipofectamina):")
print(f"  n = {n1}, x = {x1}, pÃÇ = {p1:.4f} ({p1*100:.2f}%)")
print(f"\nM√©todo B (Electroporaci√≥n):")
print(f"  n = {n2}, x = {x2}, pÃÇ = {p2:.4f} ({p2*100:.2f}%)")
print(f"\nDiferencia (B - A): {diff:.4f} ({diff*100:.2f}%)")

# M√©todo 1: C√°lculo manual
se = np.sqrt(p1*(1-p1)/n1 + p2*(1-p2)/n2)
z_crit = 1.96
me = z_crit * se
ic_manual = (diff - me, diff + me)

print(f"\nM√©todo Manual:")
print(f"  Error est√°ndar: {se:.4f}")
print(f"  Margen de error: ¬±{me:.4f}")
print(f"  IC 95%: [{ic_manual[0]:.4f}, {ic_manual[1]:.4f}]")
print(f"  IC 95%: [{ic_manual[0]*100:.2f}%, {ic_manual[1]*100:.2f}%]")

# M√©todo 2: Usando statsmodels
ic_stats = confint_proportions_2indep(x1, n1, x2, n2, method='wald')
print(f"\nM√©todo statsmodels:")
print(f"  IC 95%: [{ic_stats[0]:.4f}, {ic_stats[1]:.4f}]")

# Interpretaci√≥n
print(f"\n{'‚ïê'*60}")
print("INTERPRETACI√ìN")
print("‚ïê"*60)
if ic_manual[0] > 0:
    print("‚úì Electroporaci√≥n es significativamente MEJOR")
elif ic_manual[1] < 0:
    print("‚úó Lipofectamina es significativamente MEJOR")
else:
    print("‚ö† No hay diferencia estad√≠sticamente significativa")
    print("  (el IC incluye el cero)")</code></pre></div>
                
                <h3>üìä C√≥digo R para IC de Diferencia de Proporciones</h3>
                <div class="code-block"><pre><code class="language-r"># Datos de transfecci√≥n
n1 <- 180
x1 <- 144
n2 <- 200  
x2 <- 174

p1 <- x1 / n1
p2 <- x2 / n2

cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n")
cat("IC PARA DIFERENCIA DE PROPORCIONES\n")
cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n")

cat("M√©todo A (Lipofectamina):\n")
cat("  n =", n1, ", x =", x1, ", pÃÇ =", round(p1, 4), 
    sprintf("(%.2f%%)\n", p1*100))

cat("\nM√©todo B (Electroporaci√≥n):\n")
cat("  n =", n2, ", x =", x2, ", pÃÇ =", round(p2, 4), 
    sprintf("(%.2f%%)\n\n", p2*100))

# Usar prop.test para IC
resultado <- prop.test(c(x2, x1), c(n2, n1), conf.level = 0.95)

cat("IC 95% para la diferencia (B - A):\n")
cat("  Diferencia estimada:", resultado$estimate[1] - resultado$estimate[2], "\n")
cat("  IC 95%: [", resultado$conf.int[1], ",", resultado$conf.int[2], "]\n")
cat("  En porcentaje: [", round(resultado$conf.int[1]*100, 2), "%,",
    round(resultado$conf.int[2]*100, 2), "%]\n\n")

# Interpretaci√≥n
if (resultado$conf.int[1] > 0) {
  cat("‚úì Electroporaci√≥n es significativamente MEJOR\n")
} else if (resultado$conf.int[2] < 0) {
  cat("‚úó Lipofectamina es significativamente MEJOR\n")
} else {
  cat("‚ö† No hay diferencia estad√≠sticamente significativa\n")
  cat("  (el IC incluye el cero)\n")
}</code></pre></div>
            </div>