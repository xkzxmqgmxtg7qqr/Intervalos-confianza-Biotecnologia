<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intervalos de Confianza - Biotecnolog√≠a UTEM</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/r.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bio-color: #16a085; --bio-dark: #0e6b5d; --card-bg: #fff; --text-color: #2c3e50;
        }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #16a085 0%, #0e6b5d 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1400px; margin: 0 auto; }
        header { text-align: center; color: white; padding: 30px; margin-bottom: 30px; background: rgba(0,0,0,0.2); border-radius: 15px; }
        .tabs { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .tab-button { flex: 1; padding: 15px 25px; background: #fff; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; transition: all 0.3s; }
        .tab-button.active { background: var(--bio-color); color: white; }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .card { background: #fff; border-radius: 15px; padding: 30px; margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .card h2 { color: var(--bio-color); margin-bottom: 20px; font-size: 2em; border-bottom: 3px solid var(--bio-color); padding-bottom: 10px; }
        .formula-box { background: linear-gradient(135deg, #16a08515 0%, #0e6b5d15 100%); border-left: 4px solid var(--bio-color); padding: 20px; margin: 20px 0; border-radius: 8px; overflow-x: auto; }
        .code-block { background: #282c34; color: #abb2bf; padding: 20px; border-radius: 8px; overflow-x: auto; font-family: monospace; margin: 10px 0; }
        .r-box { background: #e3f2fd; border-left: 4px solid #2196f3; padding: 20px; margin: 20px 0; border-radius: 8px; }
        .example-box { background: #e8f5e9; border-left: 4px solid #4caf50; padding: 20px; margin: 20px 0; border-radius: 8px; }
        .output-box { background: #f5f5f5; border-left: 4px solid #4caf50; padding: 15px; margin: 10px 0; font-family: monospace; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        table th, table td { padding: 15px; text-align: left; border-bottom: 1px solid #ddd; }
        table th { background: var(--bio-color); color: white; }
        .calc-input {
            width: 100%; padding: 10px; border: 2px solid var(--border-color);
            border-radius: 5px; font-size: 1em; margin-top: 5px;
        }
        .calc-input:focus {
            outline: none; border-color: var(--bio-color);
            box-shadow: 0 0 5px rgba(22, 160, 133, 0.3);
        }
        .calc-section { margin: 20px 0; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üî¨ Intervalos de Confianza</h1>
            <p>Una y Dos Poblaciones - Ingenier√≠a en Biotecnolog√≠a | UTEM</p>
            <div style="display:inline-block;background:white;color:var(--bio-color);padding:5px 15px;border-radius:20px;font-weight:bold;margin-top:10px;">Powered by R & Python</div>
        </header>
        <div class="tabs">
            <button class="tab-button active" onclick="openTab('teoria')">üìö Teor√≠a</button>
            <button class="tab-button" onclick="openTab('una-media')">üìä IC Media</button>
            <button class="tab-button" onclick="openTab('una-prop')">üìà IC Proporci√≥n</button>
            <button class="tab-button" onclick="openTab('dos-medias')">‚öñÔ∏è IC Dos Medias</button>
            <button class="tab-button" onclick="openTab('dos-prop')">üìâ IC Dos Proporciones</button>
            <button class="tab-button" onclick="openTab('razon-var')">üìê IC Raz√≥n Varianzas</button>
            <button class="tab-button" onclick="openTab('calculadora')">üßÆ Calculadora</button>
            <button class="tab-button" onclick="openTab('python')">üêç Python</button>
            <button class="tab-button" onclick="openTab('r')">üìä R</button>
            <button class="tab-button" onclick="openTab('biotech')">üî¨ Biotech</button>
        </div>
        
        <div id="teoria" class="tab-content active">
            <div class="card">
                <h2>üìö Teor√≠a de Intervalos de Confianza</h2>
                
                <h3>üéØ Concepto Fundamental</h3>
                <p>Un <strong>intervalo de confianza (IC)</strong> es un rango de valores calculado a partir de datos muestrales que, con una probabilidad espec√≠fica (nivel de confianza), contiene el verdadero valor del par√°metro poblacional.</p>
                
                <div class="formula-box">
                    <h3>Estructura General de un IC:</h3>
                    <p>\[IC = \text{Estimador} \pm \text{Margen de Error}\]</p>
                    <p>\[IC = \hat{\theta} \pm (\text{Valor Cr√≠tico}) \times SE(\hat{\theta})\]</p>
                    <p>Donde:</p>
                    <ul>
                        <li>\(\hat{\theta}\) = Estimador puntual del par√°metro</li>
                        <li>\(SE(\hat{\theta})\) = Error est√°ndar del estimador</li>
                        <li>Valor Cr√≠tico = Depende de la distribuci√≥n y nivel de confianza</li>
                    </ul>
                </div>
                
                <h3>üìä Interpretaci√≥n del Nivel de Confianza</h3>
                <div class="example-box">
                    <p><strong>Un IC del 95% significa:</strong></p>
                    <p>Si tomamos 100 muestras diferentes y calculamos 100 intervalos de confianza del 95%, aproximadamente <strong>95 de esos intervalos contendr√°n el verdadero par√°metro poblacional</strong>, y 5 no lo contendr√°n.</p>
                    <p>‚ö†Ô∏è <strong>NO significa</strong> que hay 95% de probabilidad de que el par√°metro est√© en este intervalo espec√≠fico.</p>
                </div>
                
                <h3>üî¨ Intervalos de Confianza en Biotecnolog√≠a</h3>
                <p>En biotecnolog√≠a, los IC son cruciales para:</p>
                <ul>
                    <li>üß¨ Estimar concentraciones de prote√≠nas o enzimas</li>
                    <li>ü¶† Cuantificar crecimiento microbiano</li>
                    <li>üíä Evaluar eficacia de tratamientos</li>
                    <li>üî¨ Comparar rendimientos de procesos</li>
                    <li>üìä Validar m√©todos anal√≠ticos</li>
                </ul>
                
                <h3>üìê Tipos de Intervalos de Confianza</h3>
                
                <h4>1Ô∏è‚É£ IC para la Media de Una Poblaci√≥n (œÉ conocida)</h4>
                <div class="formula-box">
                    <p>\[IC = \bar{x} \pm z_{\alpha/2} \cdot \frac{\sigma}{\sqrt{n}}\]</p>
                    <p>Usar cuando:</p>
                    <ul>
                        <li>La varianza poblacional (œÉ¬≤) es conocida</li>
                        <li>n ‚â• 30 (TLC aplica)</li>
                    </ul>
                </div>
                
                <h4>2Ô∏è‚É£ IC para la Media de Una Poblaci√≥n (œÉ desconocida)</h4>
                <div class="formula-box">
                    <p>\[IC = \bar{x} \pm t_{n-1,\alpha/2} \cdot \frac{s}{\sqrt{n}}\]</p>
                    <p>Usar cuando:</p>
                    <ul>
                        <li>La varianza poblacional es desconocida</li>
                        <li>Datos provienen de distribuci√≥n normal</li>
                        <li>Se usa distribuci√≥n t de Student</li>
                    </ul>
                </div>
                
                <h4>3Ô∏è‚É£ IC para una Proporci√≥n</h4>
                <div class="formula-box">
                    <p>\[IC = \hat{p} \pm z_{\alpha/2} \cdot \sqrt{\frac{\hat{p}(1-\hat{p})}{n}}\]</p>
                    <p>Condiciones:</p>
                    <ul>
                        <li>n¬∑pÃÇ ‚â• 10 y n¬∑(1-pÃÇ) ‚â• 10</li>
                        <li>Muestra aleatoria</li>
                    </ul>
                </div>
                
                <h4>4Ô∏è‚É£ IC para Diferencia de Medias (Dos Poblaciones Independientes)</h4>
                <div class="formula-box">
                    <p>Varianzas iguales (pooled):</p>
                    <p>\[IC = (\bar{x}_1 - \bar{x}_2) \pm t_{n_1+n_2-2,\alpha/2} \cdot s_p \sqrt{\frac{1}{n_1} + \frac{1}{n_2}}\]</p>
                    <p>Donde:</p>
                    <p>\[s_p = \sqrt{\frac{(n_1-1)s_1^2 + (n_2-1)s_2^2}{n_1+n_2-2}}\]</p>
                    
                    <p style="margin-top:15px;">Varianzas diferentes (Welch):</p>
                    <p>\[IC = (\bar{x}_1 - \bar{x}_2) \pm t_{\nu,\alpha/2} \cdot \sqrt{\frac{s_1^2}{n_1} + \frac{s_2^2}{n_2}}\]</p>
                </div>
                
                <h4>5Ô∏è‚É£ IC para Diferencia de Proporciones</h4>
                <div class="formula-box">
                    <p>\[IC = (\hat{p}_1 - \hat{p}_2) \pm z_{\alpha/2} \cdot \sqrt{\frac{\hat{p}_1(1-\hat{p}_1)}{n_1} + \frac{\hat{p}_2(1-\hat{p}_2)}{n_2}}\]</p>
                </div>
                
                <h4>6Ô∏è‚É£ IC para la Varianza</h4>
                <div class="formula-box">
                    <p>\[IC = \left[ \frac{(n-1)s^2}{\chi^2_{n-1,\alpha/2}}, \frac{(n-1)s^2}{\chi^2_{n-1,1-\alpha/2}} \right]\]</p>
                    <p>Usa distribuci√≥n Chi-cuadrado (œá¬≤)</p>
                </div>
                
                <h3>üìà Valores Cr√≠ticos Comunes</h3>
                <table>
                    <thead>
                        <tr><th>Nivel de Confianza</th><th>Œ±</th><th>z<sub>Œ±/2</sub></th><th>Interpretaci√≥n</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>90%</td><td>0.10</td><td>1.645</td><td>Exploraci√≥n inicial</td></tr>
                        <tr><td>95%</td><td>0.05</td><td>1.960</td><td>Est√°ndar en ciencia</td></tr>
                        <tr><td>99%</td><td>0.01</td><td>2.576</td><td>Alta precisi√≥n</td></tr>
                        <tr><td>99.9%</td><td>0.001</td><td>3.291</td><td>Cr√≠tico (farmac√©utico)</td></tr>
                    </tbody>
                </table>
                
                <h3>‚öñÔ∏è Factores que Afectan el Ancho del IC</h3>
                <div class="r-box">
                    <p><strong>Ancho del IC = 2 √ó Margen de Error</strong></p>
                    <ul>
                        <li>üìè <strong>Tama√±o de muestra (n):</strong> ‚Üën ‚Üí IC m√°s estrecho</li>
                        <li>üìä <strong>Variabilidad (s o œÉ):</strong> ‚Üës ‚Üí IC m√°s ancho</li>
                        <li>üéØ <strong>Nivel de confianza:</strong> ‚Üëconfianza ‚Üí IC m√°s ancho</li>
                    </ul>
                </div>
                
                <h3>üî¨ Ejemplo Pr√°ctico en Biotecnolog√≠a</h3>
                <div class="example-box">
                    <h4>Concentraci√≥n de Prote√≠na Recombinante</h4>
                    <p><strong>Contexto:</strong> Un laboratorio produce insulina recombinante y mide la concentraci√≥n (mg/mL) en 25 lotes.</p>
                    <p><strong>Datos:</strong> xÃÑ = 5.2 mg/mL, s = 0.8 mg/mL, n = 25</p>
                    <p><strong>Objetivo:</strong> Estimar IC 95% para la concentraci√≥n media</p>
                    
                    <p><strong>Soluci√≥n:</strong></p>
                    <p>1. Como œÉ es desconocida, usamos distribuci√≥n t</p>
                    <p>2. t<sub>24, 0.025</sub> = 2.064</p>
                    <p>3. Error est√°ndar: SE = 0.8/‚àö25 = 0.16</p>
                    <p>4. Margen de error: ME = 2.064 √ó 0.16 = 0.330</p>
                    <p>5. <strong>IC 95% = [4.87, 5.53] mg/mL</strong></p>
                    
                    <p><strong>Interpretaci√≥n:</strong> Con 95% de confianza, la concentraci√≥n media poblacional de insulina est√° entre 4.87 y 5.53 mg/mL.</p>
                </div>
                
                <h3>‚úÖ Supuestos y Verificaciones</h3>
                <table>
                    <thead>
                        <tr><th>IC para</th><th>Supuestos</th><th>Verificaci√≥n</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>Media (t)</td><td>Normalidad (n < 30)</td><td>Shapiro-Wilk, Q-Q plot</td></tr>
                        <tr><td>Proporci√≥n</td><td>np ‚â• 10, n(1-p) ‚â• 10</td><td>Verificar condiciones</td></tr>
                        <tr><td>Dos medias</td><td>Normalidad, homocedasticidad</td><td>Levene test, F-test</td></tr>
                        <tr><td>Varianza</td><td>Normalidad estricta</td><td>Shapiro-Wilk</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <div id="una-media" class="tab-content">
            <div class="card">
                <h2>üìä IC para la Media de Una Poblaci√≥n</h2>
                
                <h3>üìê F√≥rmulas</h3>
                <div class="formula-box">
                    <h4>Caso 1: œÉ conocida (distribuci√≥n Normal o n ‚â• 30)</h4>
                    <p>\[IC_{1-\alpha} = \bar{x} \pm z_{\alpha/2} \cdot \frac{\sigma}{\sqrt{n}}\]</p>
                    
                    <h4 style="margin-top:20px;">Caso 2: œÉ desconocida (distribuci√≥n t de Student)</h4>
                    <p>\[IC_{1-\alpha} = \bar{x} \pm t_{n-1,\alpha/2} \cdot \frac{s}{\sqrt{n}}\]</p>
                </div>
                
                <h3>üî¨ Ejemplo 1: Concentraci√≥n de Glucosa en Medio de Cultivo</h3>
                <div class="example-box">
                    <h4>Contexto:</h4>
                    <p>Un biorreactor produce c√©lulas CHO (Chinese Hamster Ovary) para la producci√≥n de anticuerpos monoclonales. Se mide la concentraci√≥n de glucosa (g/L) en el medio de cultivo en 15 tiempos diferentes.</p>
                    
                    <p><strong>Datos:</strong> n = 15, xÃÑ = 4.2 g/L, s = 0.6 g/L</p>
                    <p><strong>Objetivo:</strong> Construir un IC 95% para la concentraci√≥n media de glucosa</p>
                    
                    <h4>Soluci√≥n Paso a Paso:</h4>
                    <p><strong>Paso 1:</strong> Identificar par√°metros</p>
                    <ul>
                        <li>n = 15</li>
                        <li>xÃÑ = 4.2 g/L</li>
                        <li>s = 0.6 g/L</li>
                        <li>Nivel de confianza = 95% ‚Üí Œ± = 0.05</li>
                    </ul>
                    
                    <p><strong>Paso 2:</strong> Como œÉ es desconocida y n < 30, usar distribuci√≥n t</p>
                    <p>Grados de libertad: gl = n - 1 = 14</p>
                    <p>Valor cr√≠tico: t<sub>14, 0.025</sub> = 2.145</p>
                    
                    <p><strong>Paso 3:</strong> Calcular error est√°ndar</p>
                    <p>\[SE = \frac{s}{\sqrt{n}} = \frac{0.6}{\sqrt{15}} = 0.155 \text{ g/L}\]</p>
                    
                    <p><strong>Paso 4:</strong> Calcular margen de error</p>
                    <p>\[ME = t_{14,0.025} \cdot SE = 2.145 \times 0.155 = 0.332 \text{ g/L}\]</p>
                    
                    <p><strong>Paso 5:</strong> Construir el intervalo</p>
                    <p>\[IC_{95\%} = [4.2 - 0.332, 4.2 + 0.332] = [3.87, 4.53] \text{ g/L}\]</p>
                    
                    <h4>‚úÖ Interpretaci√≥n:</h4>
                    <p>Con 95% de confianza, la concentraci√≥n media de glucosa en el medio de cultivo est√° entre <strong>3.87 y 4.53 g/L</strong>.</p>
                    <p><strong>Implicaci√≥n pr√°ctica:</strong> Si el rango objetivo es 3.5-5.0 g/L, el proceso est√° bajo control.</p>
                </div>
                
                <h3>üß¨ Ejemplo 2: Rendimiento de Expresi√≥n de Prote√≠na</h3>
                <div class="example-box">
                    <h4>Contexto:</h4>
                    <p>En un sistema de expresi√≥n bacteriano (E. coli), se mide el rendimiento de una prote√≠na recombinante (mg/L) en 20 fermentaciones independientes.</p>
                    
                    <p><strong>Datos:</strong> n = 20, xÃÑ = 125 mg/L, s = 18 mg/L</p>
                    <p><strong>Objetivo:</strong> IC 99% para el rendimiento medio</p>
                    
                    <h4>Soluci√≥n:</h4>
                    <p>gl = 19, t<sub>19, 0.005</sub> = 2.861</p>
                    <p>SE = 18/‚àö20 = 4.025 mg/L</p>
                    <p>ME = 2.861 √ó 4.025 = 11.52 mg/L</p>
                    <p><strong>IC 99% = [113.48, 136.52] mg/L</strong></p>
                    
                    <h4>‚úÖ Interpretaci√≥n:</h4>
                    <p>Estamos 99% confiados de que el rendimiento medio poblacional de la prote√≠na est√° entre 113.48 y 136.52 mg/L.</p>
                </div>
                
                <h3>üí° C√°lculo del Tama√±o de Muestra</h3>
                <div class="formula-box">
                    <p>Si queremos un margen de error espec√≠fico (E):</p>
                    <p>\[n = \left(\frac{z_{\alpha/2} \cdot \sigma}{E}\right)^2\]</p>
                    
                    <h4>Ejemplo:</h4>
                    <p>¬øCu√°ntas muestras necesitamos para estimar la concentraci√≥n media con un margen de error de 0.2 g/L (95% confianza, œÉ ‚âà 0.6)?</p>
                    <p>\[n = \left(\frac{1.96 \times 0.6}{0.2}\right)^2 = (5.88)^2 = 34.57 \approx 35 \text{ muestras}\]</p>
                </div>
            </div>
        </div>
        
        <div id="una-prop" class="tab-content">
            <div class="card">
                <h2>üìà IC para una Proporci√≥n</h2>
                
                <h3>üìê F√≥rmula</h3>
                <div class="formula-box">
                    <p>\[IC_{1-\alpha} = \hat{p} \pm z_{\alpha/2} \cdot \sqrt{\frac{\hat{p}(1-\hat{p})}{n}}\]</p>
                    <p>Donde:</p>
                    <ul>
                        <li>\(\hat{p} = \frac{x}{n}\) = Proporci√≥n muestral</li>
                        <li>x = N√∫mero de √©xitos</li>
                        <li>n = Tama√±o de muestra</li>
                    </ul>
                    
                    <h4>Condiciones de validez:</h4>
                    <ul>
                        <li>n¬∑pÃÇ ‚â• 10</li>
                        <li>n¬∑(1-pÃÇ) ‚â• 10</li>
                        <li>Muestra aleatoria</li>
                    </ul>
                </div>
                
                <h3>ü¶† Ejemplo 1: Viabilidad Celular en Cultivo</h3>
                <div class="example-box">
                    <h4>Contexto:</h4>
                    <p>En un cultivo de c√©lulas madre mesenquimales (MSC), se eval√∫a la viabilidad celular despu√©s de 48h. De 200 c√©lulas examinadas, 184 est√°n viables.</p>
                    
                    <p><strong>Datos:</strong> n = 200, x = 184</p>
                    <p><strong>Objetivo:</strong> IC 95% para la proporci√≥n de c√©lulas viables</p>
                    
                    <h4>Soluci√≥n:</h4>
                    <p><strong>Paso 1:</strong> Calcular pÃÇ</p>
                    <p>\[\hat{p} = \frac{184}{200} = 0.92 \quad (92\%)\]</p>
                    
                    <p><strong>Paso 2:</strong> Verificar condiciones</p>
                    <ul>
                        <li>n¬∑pÃÇ = 200 √ó 0.92 = 184 ‚â• 10 ‚úì</li>
                        <li>n¬∑(1-pÃÇ) = 200 √ó 0.08 = 16 ‚â• 10 ‚úì</li>
                    </ul>
                    
                    <p><strong>Paso 3:</strong> Valor cr√≠tico para 95%</p>
                    <p>z<sub>0.025</sub> = 1.96</p>
                    
                    <p><strong>Paso 4:</strong> Calcular error est√°ndar</p>
                    <p>\[SE = \sqrt{\frac{0.92 \times 0.08}{200}} = \sqrt{0.000368} = 0.0192\]</p>
                    
                    <p><strong>Paso 5:</strong> Margen de error</p>
                    <p>ME = 1.96 √ó 0.0192 = 0.0376</p>
                    
                    <p><strong>Paso 6:</strong> IC</p>
                    <p>IC 95% = [0.92 - 0.0376, 0.92 + 0.0376] = <strong>[0.882, 0.958]</strong></p>
                    <p>O en porcentaje: <strong>[88.2%, 95.8%]</strong></p>
                    
                    <h4>‚úÖ Interpretaci√≥n:</h4>
                    <p>Con 95% de confianza, la proporci√≥n poblacional de c√©lulas viables despu√©s de 48h est√° entre 88.2% y 95.8%.</p>
                </div>
                
                <h3>üß™ Ejemplo 2: Tasa de Transformaci√≥n Bacteriana</h3>
                <div class="example-box">
                    <h4>Contexto:</h4>
                    <p>En un experimento de transformaci√≥n de E. coli con un pl√°smido recombinante, de 500 colonias analizadas, 365 muestran resistencia al antibi√≥tico (transformaci√≥n exitosa).</p>
                    
                    <p><strong>Datos:</strong> n = 500, x = 365, pÃÇ = 0.73</p>
                    <p><strong>Objetivo:</strong> IC 99% para la eficiencia de transformaci√≥n</p>
                    
                    <h4>Soluci√≥n:</h4>
                    <p>z<sub>0.005</sub> = 2.576</p>
                    <p>\[SE = \sqrt{\frac{0.73 \times 0.27}{500}} = 0.0198\]</p>
                    <p>ME = 2.576 √ó 0.0198 = 0.051</p>
                    <p><strong>IC 99% = [0.679, 0.781]</strong> o <strong>[67.9%, 78.1%]</strong></p>
                    
                    <h4>‚úÖ Interpretaci√≥n:</h4>
                    <p>Estamos 99% confiados de que la verdadera eficiencia de transformaci√≥n est√° entre 67.9% y 78.1%.</p>
                </div>
                
                <h3>üí° Tama√±o de Muestra para Proporciones</h3>
                <div class="formula-box">
                    <p>Para un margen de error E y sin estimaci√≥n previa de p:</p>
                    <p>\[n = \left(\frac{z_{\alpha/2}}{E}\right)^2 \cdot 0.25\]</p>
                    <p>(Usa p = 0.5 como caso conservador)</p>
                    
                    <h4>Ejemplo:</h4>
                    <p>¬øCu√°ntas c√©lulas debemos examinar para estimar la viabilidad con E = 0.05 (5%) y 95% confianza?</p>
                    <p>\[n = \left(\frac{1.96}{0.05}\right)^2 \times 0.25 = (39.2)^2 \times 0.25 = 384.16 \approx 385 \text{ c√©lulas}\]</p>
                </div>
            </div>
        </div>
        
        <div id="dos-medias" class="tab-content">
            <div class="card">
                <h2>‚öñÔ∏è IC para Diferencia de Dos Medias</h2>
                
                <h3>üìê F√≥rmulas</h3>
                <div class="formula-box">
                    <h4>Caso 1: Varianzas iguales (Pooled t-test)</h4>
                    <p>\[IC = (\bar{x}_1 - \bar{x}_2) \pm t_{n_1+n_2-2,\alpha/2} \cdot s_p\sqrt{\frac{1}{n_1} + \frac{1}{n_2}}\]</p>
                    <p>Varianza combinada (pooled):</p>
                    <p>\[s_p = \sqrt{\frac{(n_1-1)s_1^2 + (n_2-1)s_2^2}{n_1+n_2-2}}\]</p>
                    
                    <h4 style="margin-top:20px;">Caso 2: Varianzas diferentes (Welch t-test)</h4>
                    <p>\[IC = (\bar{x}_1 - \bar{x}_2) \pm t_{\nu,\alpha/2} \cdot \sqrt{\frac{s_1^2}{n_1} + \frac{s_2^2}{n_2}}\]</p>
                    <p>Grados de libertad de Welch:</p>
                    <p>\[\nu = \frac{\left(\frac{s_1^2}{n_1} + \frac{s_2^2}{n_2}\right)^2}{\frac{(s_1^2/n_1)^2}{n_1-1} + \frac{(s_2^2/n_2)^2}{n_2-1}}\]</p>
                </div>
                
                <h3>üß¨ Ejemplo: Comparaci√≥n de Medios de Cultivo</h3>
                <div class="example-box">
                    <h4>Contexto:</h4>
                    <p>Se compara el crecimiento de microalgas (densidad √≥ptica OD<sub>680</sub>) en dos medios de cultivo diferentes:</p>
                    <ul>
                        <li><strong>Medio A (control):</strong> n‚ÇÅ = 12, xÃÑ‚ÇÅ = 0.85, s‚ÇÅ = 0.12</li>
                        <li><strong>Medio B (nuevo):</strong> n‚ÇÇ = 15, xÃÑ‚ÇÇ = 0.95, s‚ÇÇ = 0.15</li>
                    </ul>
                    <p><strong>Objetivo:</strong> IC 95% para la diferencia de medias (Œº_B - Œº_A)</p>
                    
                    <h4>Soluci√≥n (Welch):</h4>
                    <p><strong>Paso 1:</strong> Calcular diferencia de medias</p>
                    <p>xÃÑ‚ÇÇ - xÃÑ‚ÇÅ = 0.95 - 0.85 = 0.10</p>
                    
                    <p><strong>Paso 2:</strong> Calcular SE</p>
                    <p>\[SE = \sqrt{\frac{0.12^2}{12} + \frac{0.15^2}{15}} = \sqrt{0.0012 + 0.0015} = 0.052\]</p>
                    
                    <p><strong>Paso 3:</strong> Grados de libertad de Welch</p>
                    <p>ŒΩ ‚âà 24.3 ‚Üí usar t<sub>24, 0.025</sub> = 2.064</p>
                    
                    <p><strong>Paso 4:</strong> Margen de error</p>
                    <p>ME = 2.064 √ó 0.052 = 0.107</p>
                    
                    <p><strong>Paso 5:</strong> IC</p>
                    <p><strong>IC 95% = [-0.007, 0.207]</strong></p>
                    
                    <h4>‚úÖ Interpretaci√≥n:</h4>
                    <p>Con 95% de confianza, la diferencia en crecimiento (Medio B - Medio A) est√° entre -0.007 y 0.207 unidades de OD<sub>680</sub>.</p>
                    <p><strong>Conclusi√≥n:</strong> Como el intervalo incluye el cero, no hay evidencia concluyente de que el Medio B sea mejor que el Medio A al 95% de confianza.</p>
                </div>
            </div>
        </div>
        
        <div id="dos-prop" class="tab-content">
            <div class="card">
                <h2>üìâ IC para Diferencia de Dos Proporciones</h2>
                
                <h3>üìê F√≥rmula</h3>
                <div class="formula-box">
                    <p>\[IC = (\hat{p}_1 - \hat{p}_2) \pm z_{\alpha/2} \cdot \sqrt{\frac{\hat{p}_1(1-\hat{p}_1)}{n_1} + \frac{\hat{p}_2(1-\hat{p}_2)}{n_2}}\]</p>
                    <p>Donde:</p>
                    <ul>
                        <li>\(\hat{p}_1 = \frac{x_1}{n_1}\) = Proporci√≥n muestral del grupo 1</li>
                        <li>\(\hat{p}_2 = \frac{x_2}{n_2}\) = Proporci√≥n muestral del grupo 2</li>
                        <li>x‚ÇÅ, x‚ÇÇ = N√∫mero de √©xitos en cada grupo</li>
                        <li>n‚ÇÅ, n‚ÇÇ = Tama√±os de muestra</li>
                    </ul>
                    
                    <h4>Condiciones de validez:</h4>
                    <ul>
                        <li>n‚ÇÅ¬∑pÃÇ‚ÇÅ ‚â• 10, n‚ÇÅ¬∑(1-pÃÇ‚ÇÅ) ‚â• 10</li>
                        <li>n‚ÇÇ¬∑pÃÇ‚ÇÇ ‚â• 10, n‚ÇÇ¬∑(1-pÃÇ‚ÇÇ) ‚â• 10</li>
                        <li>Muestras independientes</li>
                    </ul>
                </div>
                
                <h3>üß¨ Ejemplo 1: Comparaci√≥n de M√©todos de Transfecci√≥n</h3>
                <div class="example-box">
                    <h4>Contexto:</h4>
                    <p>Un laboratorio compara dos m√©todos de transfecci√≥n de c√©lulas HEK293 con un pl√°smido reportero GFP:</p>
                    <ul>
                        <li><strong>M√©todo A (Lipofectamina):</strong> 180 c√©lulas transfectadas, 144 expresan GFP</li>
                        <li><strong>M√©todo B (Electroporaci√≥n):</strong> 200 c√©lulas transfectadas, 174 expresan GFP</li>
                    </ul>
                    <p><strong>Objetivo:</strong> Construir IC 95% para la diferencia de eficiencias (p_B - p_A)</p>
                    
                    <h4>Soluci√≥n Paso a Paso:</h4>
                    <p><strong>Paso 1:</strong> Calcular proporciones muestrales</p>
                    <p>\[\hat{p}_A = \frac{144}{180} = 0.800 \quad (80.0\%)\]</p>
                    <p>\[\hat{p}_B = \frac{174}{200} = 0.870 \quad (87.0\%)\]</p>
                    
                    <p><strong>Paso 2:</strong> Verificar condiciones</p>
                    <ul>
                        <li>M√©todo A: 180√ó0.80 = 144 ‚â• 10 ‚úì,  180√ó0.20 = 36 ‚â• 10 ‚úì</li>
                        <li>M√©todo B: 200√ó0.87 = 174 ‚â• 10 ‚úì,  200√ó0.13 = 26 ‚â• 10 ‚úì</li>
                    </ul>
                    
                    <p><strong>Paso 3:</strong> Calcular diferencia</p>
                    <p>\[\hat{p}_B - \hat{p}_A = 0.870 - 0.800 = 0.070 \quad (7.0\%)\]</p>
                    
                    <p><strong>Paso 4:</strong> Calcular error est√°ndar</p>
                    <p>\[SE = \sqrt{\frac{0.80 \times 0.20}{180} + \frac{0.87 \times 0.13}{200}}\]</p>
                    <p>\[SE = \sqrt{0.000889 + 0.000566} = \sqrt{0.001455} = 0.0381\]</p>
                    
                    <p><strong>Paso 5:</strong> Valor cr√≠tico y margen de error</p>
                    <p>z<sub>0.025</sub> = 1.96</p>
                    <p>ME = 1.96 √ó 0.0381 = 0.0747</p>
                    
                    <p><strong>Paso 6:</strong> Construir IC</p>
                    <p>\[IC_{95\%} = [0.070 - 0.0747, 0.070 + 0.0747]\]</p>
                    <p><strong>IC 95% = [-0.0047, 0.1447]</strong></p>
                    <p>En porcentaje: <strong>[-0.47%, 14.47%]</strong></p>
                    
                    <h4>‚úÖ Interpretaci√≥n:</h4>
                    <p>Con 95% de confianza, la diferencia en eficiencia de transfecci√≥n (Electroporaci√≥n - Lipofectamina) est√° entre -0.47% y 14.47%.</p>
                    <p><strong>Conclusi√≥n:</strong> Como el intervalo incluye el cero, no hay evidencia estad√≠stica concluyente de que la electroporaci√≥n sea significativamente mejor que lipofectamina al 95% de confianza, aunque la electroporaci√≥n muestra una tendencia favorable (7% mayor en la muestra).</p>
                </div>
                
                <h3>ü¶† Ejemplo 2: Tasa de Contaminaci√≥n en Biorreactores</h3>
                <div class="example-box">
                    <h4>Contexto:</h4>
                    <p>Una planta de producci√≥n biofarmac√©utica compara la tasa de contaminaci√≥n bacteriana en dos tipos de biorreactores:</p>
                    <ul>
                        <li><strong>Biorreactor Tipo A:</strong> 250 lotes, 18 contaminados ‚Üí pÃÇ_A = 0.072 (7.2%)</li>
                        <li><strong>Biorreactor Tipo B:</strong> 300 lotes, 12 contaminados ‚Üí pÃÇ_B = 0.040 (4.0%)</li>
                    </ul>
                    
                    <h4>Soluci√≥n:</h4>
                    <p>Diferencia: pÃÇ_A - pÃÇ_B = 0.072 - 0.040 = 0.032 (3.2%)</p>
                    <p>\[SE = \sqrt{\frac{0.072 \times 0.928}{250} + \frac{0.040 \times 0.960}{300}} = 0.0197\]</p>
                    <p>ME = 1.96 √ó 0.0197 = 0.0386</p>
                    <p><strong>IC 95% = [-0.0066, 0.0706]</strong> o <strong>[-0.66%, 7.06%]</strong></p>
                    
                    <h4>‚úÖ Interpretaci√≥n:</h4>
                    <p>Con 95% de confianza, la diferencia en tasa de contaminaci√≥n (Tipo A - Tipo B) est√° entre -0.66% y 7.06%.</p>
                    <p><strong>Decisi√≥n pr√°ctica:</strong> Aunque el IC incluye cero (no significancia estad√≠stica estricta), el Tipo B muestra menor contaminaci√≥n. Se recomienda an√°lisis de costo-beneficio considerando que el Tipo B podr√≠a reducir hasta 7% la contaminaci√≥n.</p>
                </div>
                
                <h3>üíª C√≥digo Python para IC de Diferencia de Proporciones</h3>
                <div class="code-block"><pre><code class="language-python">import numpy as np
from scipy import stats
from statsmodels.stats.proportion import confint_proportions_2indep

# Datos de transfecci√≥n
n1, x1 = 180, 144  # Lipofectamina
n2, x2 = 200, 174  # Electroporaci√≥n

p1 = x1 / n1
p2 = x2 / n2
diff = p2 - p1

print("‚ïê"*60)
print("IC PARA DIFERENCIA DE PROPORCIONES")
print("‚ïê"*60)
print(f"\nM√©todo A (Lipofectamina):")
print(f"  n = {n1}, x = {x1}, pÃÇ = {p1:.4f} ({p1*100:.2f}%)")
print(f"\nM√©todo B (Electroporaci√≥n):")
print(f"  n = {n2}, x = {x2}, pÃÇ = {p2:.4f} ({p2*100:.2f}%)")
print(f"\nDiferencia (B - A): {diff:.4f} ({diff*100:.2f}%)")

# M√©todo 1: C√°lculo manual
se = np.sqrt(p1*(1-p1)/n1 + p2*(1-p2)/n2)
z_crit = 1.96
me = z_crit * se
ic_manual = (diff - me, diff + me)

print(f"\nM√©todo Manual:")
print(f"  Error est√°ndar: {se:.4f}")
print(f"  Margen de error: ¬±{me:.4f}")
print(f"  IC 95%: [{ic_manual[0]:.4f}, {ic_manual[1]:.4f}]")
print(f"  IC 95%: [{ic_manual[0]*100:.2f}%, {ic_manual[1]*100:.2f}%]")

# M√©todo 2: Usando statsmodels
ic_stats = confint_proportions_2indep(x1, n1, x2, n2, method='wald')
print(f"\nM√©todo statsmodels:")
print(f"  IC 95%: [{ic_stats[0]:.4f}, {ic_stats[1]:.4f}]")

# Interpretaci√≥n
print(f"\n{'‚ïê'*60}")
print("INTERPRETACI√ìN")
print("‚ïê"*60)
if ic_manual[0] > 0:
    print("‚úì Electroporaci√≥n es significativamente MEJOR")
elif ic_manual[1] < 0:
    print("‚úó Lipofectamina es significativamente MEJOR")
else:
    print("‚ö† No hay diferencia estad√≠sticamente significativa")
    print("  (el IC incluye el cero)")</code></pre></div>
                
                <h3>üìä C√≥digo R para IC de Diferencia de Proporciones</h3>
                <div class="code-block"><pre><code class="language-r"># Datos de transfecci√≥n
n1 <- 180
x1 <- 144
n2 <- 200  
x2 <- 174

p1 <- x1 / n1
p2 <- x2 / n2

cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n")
cat("IC PARA DIFERENCIA DE PROPORCIONES\n")
cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n")

cat("M√©todo A (Lipofectamina):\n")
cat("  n =", n1, ", x =", x1, ", pÃÇ =", round(p1, 4), 
    sprintf("(%.2f%%)\n", p1*100))

cat("\nM√©todo B (Electroporaci√≥n):\n")
cat("  n =", n2, ", x =", x2, ", pÃÇ =", round(p2, 4), 
    sprintf("(%.2f%%)\n\n", p2*100))

# Usar prop.test para IC
resultado <- prop.test(c(x2, x1), c(n2, n1), conf.level = 0.95)

cat("IC 95% para la diferencia (B - A):\n")
cat("  Diferencia estimada:", resultado$estimate[1] - resultado$estimate[2], "\n")
cat("  IC 95%: [", resultado$conf.int[1], ",", resultado$conf.int[2], "]\n")
cat("  En porcentaje: [", round(resultado$conf.int[1]*100, 2), "%,",
    round(resultado$conf.int[2]*100, 2), "%]\n\n")

# Interpretaci√≥n
if (resultado$conf.int[1] > 0) {
  cat("‚úì Electroporaci√≥n es significativamente MEJOR\n")
} else if (resultado$conf.int[2] < 0) {
  cat("‚úó Lipofectamina es significativamente MEJOR\n")
} else {
  cat("‚ö† No hay diferencia estad√≠sticamente significativa\n")
  cat("  (el IC incluye el cero)\n")
}</code></pre></div>
            </div>
        </div>
        
        <div id="razon-var" class="tab-content">
            <div class="card">
                <h2>üìê IC para Raz√≥n de Varianzas</h2>
                
                <h3>üìê F√≥rmula (Distribuci√≥n F)</h3>
                <div class="formula-box">
                    <p>\[IC = \left[ \frac{s_1^2/s_2^2}{F_{n_1-1, n_2-1, \alpha/2}}, \frac{s_1^2/s_2^2}{F_{n_1-1, n_2-1, 1-\alpha/2}} \right]\]</p>
                    <p>O equivalentemente:</p>
                    <p>\[IC = \left[ \frac{s_1^2}{s_2^2} \cdot \frac{1}{F_{n_1-1, n_2-1, \alpha/2}}, \frac{s_1^2}{s_2^2} \cdot F_{n_2-1, n_1-1, \alpha/2} \right]\]</p>
                    <p>Donde:</p>
                    <ul>
                        <li>\(s_1^2, s_2^2\) = Varianzas muestrales</li>
                        <li>\(n_1, n_2\) = Tama√±os de muestra</li>
                        <li>F = Distribuci√≥n F de Fisher</li>
                    </ul>
                    
                    <h4>Interpretaci√≥n de la Raz√≥n:</h4>
                    <ul>
                        <li>Si IC incluye 1: No hay diferencia significativa entre varianzas</li>
                        <li>Si IC > 1: œÉ‚ÇÅ¬≤ > œÉ‚ÇÇ¬≤ (mayor variabilidad en grupo 1)</li>
                        <li>Si IC < 1: œÉ‚ÇÅ¬≤ < œÉ‚ÇÇ¬≤ (menor variabilidad en grupo 1)</li>
                    </ul>
                    
                    <h4>Supuestos:</h4>
                    <ul>
                        <li><strong>Normalidad estricta</strong> de ambas poblaciones</li>
                        <li>Muestras independientes</li>
                    </ul>
                </div>
                
                <h3>üî¨ Ejemplo 1: Precisi√≥n de Equipos de Medici√≥n</h3>
                <div class="example-box">
                    <h4>Contexto:</h4>
                    <p>Un laboratorio de biotecnolog√≠a eval√∫a la precisi√≥n (variabilidad) de dos espectrofot√≥metros midiendo la misma soluci√≥n de prote√≠na BSA (1 mg/mL) repetidamente:</p>
                    <ul>
                        <li><strong>Espectrofot√≥metro A:</strong> 15 mediciones, s¬≤_A = 0.0025 (mg/mL)¬≤</li>
                        <li><strong>Espectrofot√≥metro B:</strong> 12 mediciones, s¬≤_B = 0.0016 (mg/mL)¬≤</li>
                    </ul>
                    <p><strong>Objetivo:</strong> Determinar si hay diferencia significativa en la precisi√≥n (IC 95% para œÉ¬≤_A/œÉ¬≤_B)</p>
                    
                    <h4>Soluci√≥n Paso a Paso:</h4>
                    <p><strong>Paso 1:</strong> Calcular raz√≥n de varianzas muestrales</p>
                    <p>\[F_{obs} = \frac{s_A^2}{s_B^2} = \frac{0.0025}{0.0016} = 1.5625\]</p>
                    
                    <p><strong>Paso 2:</strong> Grados de libertad</p>
                    <ul>
                        <li>gl‚ÇÅ = n_A - 1 = 14</li>
                        <li>gl‚ÇÇ = n_B - 1 = 11</li>
                    </ul>
                    
                    <p><strong>Paso 3:</strong> Valores cr√≠ticos de F</p>
                    <p>F<sub>14, 11, 0.025</sub> = 3.09 (superior)</p>
                    <p>F<sub>14, 11, 0.975</sub> = 1/F<sub>11, 14, 0.025</sub> = 1/3.21 = 0.312 (inferior)</p>
                    
                    <p><strong>Paso 4:</strong> Construir IC</p>
                    <p>\[IC_{95\%} = \left[\frac{1.5625}{3.09}, 1.5625 \times \frac{1}{0.312}\right]\]</p>
                    <p>\[IC_{95\%} = [0.506, 5.008]\]</p>
                    
                    <h4>‚úÖ Interpretaci√≥n:</h4>
                    <p>Con 95% de confianza, la raz√≥n de varianzas poblacionales (œÉ¬≤_A/œÉ¬≤_B) est√° entre 0.506 y 5.008.</p>
                    <p><strong>Conclusi√≥n:</strong> Como el intervalo incluye 1, <strong>no hay evidencia estad√≠stica de que un espectrofot√≥metro sea m√°s preciso que el otro</strong>. Ambos equipos tienen precisi√≥n comparable.</p>
                    <p><strong>Decisi√≥n pr√°ctica:</strong> Cualquiera de los dos equipos es adecuado para las mediciones del laboratorio.</p>
                </div>
                
                <h3>üß™ Ejemplo 2: Reproducibilidad de M√©todos de Cultivo</h3>
                <div class="example-box">
                    <h4>Contexto:</h4>
                    <p>Se compara la reproducibilidad (consistencia) en el rendimiento celular de dos protocolos de cultivo de c√©lulas CHO:</p>
                    <ul>
                        <li><strong>Protocolo A (convencional):</strong> n=20, s¬≤=12.5 (√ó10‚Å∂ c√©lulas/mL)¬≤</li>
                        <li><strong>Protocolo B (optimizado):</strong> n=18, s¬≤=6.8 (√ó10‚Å∂ c√©lulas/mL)¬≤</li>
                    </ul>
                    
                    <h4>Soluci√≥n:</h4>
                    <p>Raz√≥n observada: F_obs = 12.5/6.8 = 1.838</p>
                    <p>gl: 19 y 17</p>
                    <p>F<sub>19,17,0.025</sub> ‚âà 2.62, F<sub>19,17,0.975</sub> ‚âà 0.38</p>
                    <p><strong>IC 95% = [0.70, 4.81]</strong></p>
                    
                    <h4>‚úÖ Interpretaci√≥n:</h4>
                    <p>El IC incluye 1, por lo que no hay evidencia estad√≠stica de diferencia significativa en la variabilidad entre protocolos.</p>
                    <p><strong>Aplicaci√≥n:</strong> Ambos protocolos tienen reproducibilidad comparable, por lo que la elecci√≥n puede basarse en otros criterios (costo, tiempo, rendimiento medio).</p>
                </div>
                
                <h3>üíª C√≥digo Python para IC de Raz√≥n de Varianzas</h3>
                <div class="code-block"><pre><code class="language-python">import numpy as np
from scipy import stats

# Datos de espectrofot√≥metros
n1, s1_sq = 15, 0.0025  # Equipo A
n2, s2_sq = 12, 0.0016  # Equipo B

# Calcular raz√≥n de varianzas
F_obs = s1_sq / s2_sq
gl1 = n1 - 1
gl2 = n2 - 1

print("‚ïê"*60)
print("IC PARA RAZ√ìN DE VARIANZAS")
print("‚ïê"*60)
print(f"\nEspectrofot√≥metro A:")
print(f"  n = {n1}, s¬≤ = {s1_sq}")
print(f"\nEspectrofot√≥metro B:")
print(f"  n = {n2}, s¬≤ = {s2_sq}")
print(f"\nRaz√≥n observada F = s¬≤_A / s¬≤_B = {F_obs:.4f}")

# Calcular IC para raz√≥n de varianzas
alpha = 0.05
F_upper = stats.f.ppf(1 - alpha/2, gl1, gl2)
F_lower = stats.f.ppf(alpha/2, gl1, gl2)

ic_lower = F_obs / F_upper
ic_upper = F_obs / F_lower

print(f"\n{'‚ïê'*60}")
print("INTERVALO DE CONFIANZA 95%")
print("‚ïê"*60)
print(f"Grados de libertad: ({gl1}, {gl2})")
print(f"F_{gl1},{gl2},0.975 = {F_lower:.4f}")
print(f"F_{gl1},{gl2},0.025 = {F_upper:.4f}")
print(f"\nIC 95% para œÉ¬≤_A/œÉ¬≤_B = [{ic_lower:.3f}, {ic_upper:.3f}]")

# Interpretaci√≥n
print(f"\n{'‚ïê'*60}")
print("INTERPRETACI√ìN")
print("‚ïê"*60)
if ic_lower > 1:
    print("‚úì Equipo A tiene significativamente MAYOR variabilidad")
    print("  ‚Üí Equipo B es m√°s preciso")
elif ic_upper < 1:
    print("‚úì Equipo B tiene significativamente MAYOR variabilidad")
    print("  ‚Üí Equipo A es m√°s preciso")
else:
    print("‚ö† No hay diferencia significativa en precisi√≥n")
    print("  (el IC incluye 1)")

# Visualizaci√≥n
import matplotlib.pyplot as plt

fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(12, 5))

# Gr√°fico 1: Distribuci√≥n F
x = np.linspace(0, 6, 1000)
y = stats.f.pdf(x, gl1, gl2)
ax1.plot(x, y, 'b-', linewidth=2, label=f'F({gl1},{gl2})')
ax1.axvline(F_obs, color='red', linestyle='--', linewidth=2, label=f'F_obs = {F_obs:.3f}')
ax1.axvline(ic_lower, color='orange', linestyle=':', linewidth=2, label='IC 95%')
ax1.axvline(ic_upper, color='orange', linestyle=':', linewidth=2)
ax1.axvline(1, color='green', linestyle='-', linewidth=1, alpha=0.5, label='F = 1')
ax1.set_xlabel('F = s¬≤_A / s¬≤_B', fontsize=12)
ax1.set_ylabel('Densidad', fontsize=12)
ax1.set_title('Distribuci√≥n F y IC', fontsize=14, fontweight='bold')
ax1.legend()
ax1.grid(alpha=0.3)

# Gr√°fico 2: IC visualizado
ax2.errorbar(1, F_obs, 
             yerr=[[F_obs-ic_lower], [ic_upper-F_obs]],
             fmt='o', markersize=15, color='#16a085',
             elinewidth=4, capsize=15, capthick=4)
ax2.axhline(1, color='red', linestyle='--', linewidth=2, label='Raz√≥n = 1')
ax2.set_xlim(0.5, 1.5)
ax2.set_ylim(0, max(ic_upper, 2) * 1.1)
ax2.set_ylabel('Raz√≥n œÉ¬≤_A / œÉ¬≤_B', fontsize=12)
ax2.set_title('IC 95% para Raz√≥n de Varianzas', fontsize=14, fontweight='bold')
ax2.legend()
ax2.grid(alpha=0.3)
ax2.set_xticks([])

plt.tight_layout()
plt.show()</code></pre></div>
                
                <h3>üìä C√≥digo R para IC de Raz√≥n de Varianzas</h3>
                <div class="code-block"><pre><code class="language-r"># Datos de espectrofot√≥metros
# Generamos datos de ejemplo con las varianzas especificadas
set.seed(123)
equipo_A <- rnorm(15, mean=1.0, sd=sqrt(0.0025))
equipo_B <- rnorm(12, mean=1.0, sd=sqrt(0.0016))

cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n")
cat("IC PARA RAZ√ìN DE VARIANZAS\n")
cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n")

# Estad√≠sticas
cat("Espectrofot√≥metro A:\n")
cat("  n =", length(equipo_A), "\n")
cat("  s¬≤ =", var(equipo_A), "(mg/mL)¬≤\n")
cat("  s =", sd(equipo_A), "mg/mL\n\n")

cat("Espectrofot√≥metro B:\n")
cat("  n =", length(equipo_B), "\n")
cat("  s¬≤ =", var(equipo_B), "(mg/mL)¬≤\n")
cat("  s =", sd(equipo_B), "mg/mL\n\n")

# Test F para raz√≥n de varianzas
resultado <- var.test(equipo_A, equipo_B, conf.level = 0.95)

cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n")
cat("INTERVALO DE CONFIANZA 95%\n")
cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n")
cat("Raz√≥n de varianzas (A/B):", resultado$estimate, "\n")
cat("IC 95%: [", resultado$conf.int[1], ",", resultado$conf.int[2], "]\n")
cat("Estad√≠stico F:", resultado$statistic, "\n")
cat("p-valor:", resultado$p.value, "\n\n")

# Interpretaci√≥n
cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n")
cat("INTERPRETACI√ìN\n")
cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n")

if (resultado$conf.int[1] > 1) {
  cat("‚úì Equipo A tiene significativamente MAYOR variabilidad\n")
  cat("  ‚Üí Equipo B es m√°s preciso\n")
} else if (resultado$conf.int[2] < 1) {
  cat("‚úì Equipo B tiene significativamente MAYOR variabilidad\n")
  cat("  ‚Üí Equipo A es m√°s preciso\n")
} else {
  cat("‚ö† No hay diferencia significativa en precisi√≥n\n")
  cat("  (el IC incluye 1)\n")
}

# Visualizaci√≥n
par(mfrow = c(1, 3))

# Boxplots comparativos
boxplot(equipo_A, equipo_B,
        names = c("Equipo A", "Equipo B"),
        main = "Comparaci√≥n de Variabilidad",
        ylab = "Concentraci√≥n (mg/mL)",
        col = c("#3498db", "#16a085"),
        notch = TRUE)

# Gr√°ficos de dispersi√≥n
plot(rep(1, length(equipo_A)), equipo_A,
     xlim = c(0.5, 2.5),
     ylim = range(c(equipo_A, equipo_B)),
     col = "#3498db",
     pch = 19,
     cex = 1.5,
     xlab = "",
     ylab = "Concentraci√≥n (mg/mL)",
     main = "Dispersi√≥n de Mediciones",
     xaxt = "n")
points(rep(2, length(equipo_B)), equipo_B,
       col = "#16a085",
       pch = 19,
       cex = 1.5)
axis(1, at = c(1, 2), labels = c("Equipo A", "Equipo B"))
abline(h = mean(c(equipo_A, equipo_B)), col = "red", lty = 2)

# IC para raz√≥n
F_obs <- resultado$estimate
plot(1, F_obs,
     xlim = c(0.5, 1.5),
     ylim = c(0, max(resultado$conf.int[2], 2) * 1.1),
     pch = 19,
     cex = 3,
     col = "#16a085",
     main = "IC 95% para Raz√≥n œÉ¬≤_A/œÉ¬≤_B",
     ylab = "Raz√≥n de Varianzas",
     xlab = "",
     xaxt = "n")
arrows(1, resultado$conf.int[1],
       1, resultado$conf.int[2],
       angle = 90,
       code = 3,
       length = 0.15,
       lwd = 3,
       col = "#16a085")
abline(h = 1, col = "red", lty = 2, lwd = 2)
text(1.1, F_obs, sprintf("%.2f", F_obs), pos = 4, font = 2)

par(mfrow = c(1, 1))</code></pre></div>
                
                <h3>üîç Aplicaciones en Biotecnolog√≠a</h3>
                <table>
                    <thead>
                        <tr><th>Aplicaci√≥n</th><th>Comparaci√≥n</th><th>Decisi√≥n basada en IC</th></tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Control de calidad</td>
                            <td>Precisi√≥n de lotes</td>
                            <td>Identificar lotes con alta variabilidad</td>
                        </tr>
                        <tr>
                            <td>Validaci√≥n de m√©todos</td>
                            <td>Reproducibilidad entre t√©cnicas</td>
                            <td>Seleccionar m√©todo m√°s consistente</td>
                        </tr>
                        <tr>
                            <td>Comparaci√≥n de equipos</td>
                            <td>Precisi√≥n de instrumentos</td>
                            <td>Calibraci√≥n o reemplazo de equipo</td>
                        </tr>
                        <tr>
                            <td>Optimizaci√≥n de procesos</td>
                            <td>Estabilidad de rendimientos</td>
                            <td>Evaluar mejoras en consistencia</td>
                        </tr>
                        <tr>
                            <td>Estudios de estabilidad</td>
                            <td>Variabilidad temporal</td>
                            <td>Determinar vida √∫til del producto</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <div id="calculadora" class="tab-content">
            <div class="card">
                <h2>üßÆ Calculadora de Intervalos de Confianza</h2>
                <p>Selecciona el tipo de intervalo de confianza que deseas calcular:</p>
                
                <div style="margin: 20px 0;">
                    <label for="tipoIC" style="font-weight: bold; font-size: 1.1em;">Tipo de IC:</label>
                    <select id="tipoIC" onchange="cambiarTipoIC()" style="padding: 10px; font-size: 1em; border-radius: 5px; border: 2px solid var(--bio-color); margin-left: 10px;">
                        <option value="una-media">IC para Una Media (œÉ desconocida)</option>
                        <option value="una-proporcion">IC para Una Proporci√≥n</option>
                        <option value="dos-medias">IC para Diferencia de Dos Medias</option>
                        <option value="dos-proporciones">IC para Diferencia de Dos Proporciones</option>
                        <option value="razon-varianzas">IC para Raz√≥n de Varianzas</option>
                    </select>
                </div>
                
                <!-- CALCULADORA: IC PARA UNA MEDIA -->
                <div id="calc-una-media" class="calc-section">
                    <h3>üìä IC para Una Media</h3>
                    <div class="r-box">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                            <div>
                                <label>Tama√±o de muestra (n):</label>
                                <input type="number" id="n_media" value="15" min="2" class="calc-input">
                            </div>
                            <div>
                                <label>Media muestral (xÃÑ):</label>
                                <input type="number" id="xbar_media" value="4.2" step="0.01" class="calc-input">
                            </div>
                            <div>
                                <label>Desviaci√≥n est√°ndar (s):</label>
                                <input type="number" id="s_media" value="0.6" step="0.01" min="0" class="calc-input">
                            </div>
                            <div>
                                <label>Nivel de confianza (%):</label>
                                <select id="confianza_media" class="calc-input">
                                    <option value="0.90">90%</option>
                                    <option value="0.95" selected>95%</option>
                                    <option value="0.99">99%</option>
                                </select>
                            </div>
                        </div>
                        <button onclick="calcularICMedia()" class="btn">Calcular IC</button>
                    </div>
                    <div id="resultado-una-media" class="result-box" style="display:none;"></div>
                </div>
                
                <!-- CALCULADORA: IC PARA UNA PROPORCI√ìN -->
                <div id="calc-una-proporcion" class="calc-section" style="display:none;">
                    <h3>üìà IC para Una Proporci√≥n</h3>
                    <div class="r-box">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                            <div>
                                <label>Tama√±o de muestra (n):</label>
                                <input type="number" id="n_prop" value="200" min="30" class="calc-input">
                            </div>
                            <div>
                                <label>N√∫mero de √©xitos (x):</label>
                                <input type="number" id="x_prop" value="184" min="0" class="calc-input">
                            </div>
                            <div>
                                <label>Nivel de confianza (%):</label>
                                <select id="confianza_prop" class="calc-input">
                                    <option value="0.90">90%</option>
                                    <option value="0.95" selected>95%</option>
                                    <option value="0.99">99%</option>
                                </select>
                            </div>
                        </div>
                        <button onclick="calcularICProporcion()" class="btn">Calcular IC</button>
                    </div>
                    <div id="resultado-una-proporcion" class="result-box" style="display:none;"></div>
                </div>
                
                <!-- CALCULADORA: IC PARA DOS MEDIAS -->
                <div id="calc-dos-medias" class="calc-section" style="display:none;">
                    <h3>‚öñÔ∏è IC para Diferencia de Dos Medias</h3>
                    <div class="r-box">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                            <div style="grid-column: 1 / -1; background: #e3f2fd; padding: 10px; border-radius: 5px;">
                                <strong>Grupo 1:</strong>
                            </div>
                            <div>
                                <label>n‚ÇÅ:</label>
                                <input type="number" id="n1_medias" value="12" min="2" class="calc-input">
                            </div>
                            <div>
                                <label>xÃÑ‚ÇÅ:</label>
                                <input type="number" id="xbar1_medias" value="0.85" step="0.01" class="calc-input">
                            </div>
                            <div>
                                <label>s‚ÇÅ:</label>
                                <input type="number" id="s1_medias" value="0.12" step="0.01" min="0" class="calc-input">
                            </div>
                            <div style="grid-column: 1 / -1; background: #e8f5e9; padding: 10px; border-radius: 5px; margin-top: 10px;">
                                <strong>Grupo 2:</strong>
                            </div>
                            <div>
                                <label>n‚ÇÇ:</label>
                                <input type="number" id="n2_medias" value="15" min="2" class="calc-input">
                            </div>
                            <div>
                                <label>xÃÑ‚ÇÇ:</label>
                                <input type="number" id="xbar2_medias" value="0.95" step="0.01" class="calc-input">
                            </div>
                            <div>
                                <label>s‚ÇÇ:</label>
                                <input type="number" id="s2_medias" value="0.15" step="0.01" min="0" class="calc-input">
                            </div>
                            <div>
                                <label>Nivel de confianza (%):</label>
                                <select id="confianza_dosmedias" class="calc-input">
                                    <option value="0.90">90%</option>
                                    <option value="0.95" selected>95%</option>
                                    <option value="0.99">99%</option>
                                </select>
                            </div>
                        </div>
                        <button onclick="calcularICDosMedias()" class="btn">Calcular IC</button>
                    </div>
                    <div id="resultado-dos-medias" class="result-box" style="display:none;"></div>
                </div>
                
                <!-- CALCULADORA: IC PARA DOS PROPORCIONES -->
                <div id="calc-dos-proporciones" class="calc-section" style="display:none;">
                    <h3>üìâ IC para Diferencia de Dos Proporciones</h3>
                    <div class="r-box">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                            <div style="grid-column: 1 / -1; background: #e3f2fd; padding: 10px; border-radius: 5px;">
                                <strong>Grupo 1:</strong>
                            </div>
                            <div>
                                <label>n‚ÇÅ (tama√±o muestra):</label>
                                <input type="number" id="n1_prop" value="180" min="30" class="calc-input">
                            </div>
                            <div>
                                <label>x‚ÇÅ (√©xitos):</label>
                                <input type="number" id="x1_prop" value="144" min="0" class="calc-input">
                            </div>
                            <div style="grid-column: 1 / -1; background: #e8f5e9; padding: 10px; border-radius: 5px; margin-top: 10px;">
                                <strong>Grupo 2:</strong>
                            </div>
                            <div>
                                <label>n‚ÇÇ (tama√±o muestra):</label>
                                <input type="number" id="n2_prop" value="200" min="30" class="calc-input">
                            </div>
                            <div>
                                <label>x‚ÇÇ (√©xitos):</label>
                                <input type="number" id="x2_prop" value="174" min="0" class="calc-input">
                            </div>
                            <div>
                                <label>Nivel de confianza (%):</label>
                                <select id="confianza_dosprop" class="calc-input">
                                    <option value="0.90">90%</option>
                                    <option value="0.95" selected>95%</option>
                                    <option value="0.99">99%</option>
                                </select>
                            </div>
                        </div>
                        <button onclick="calcularICDosProporciones()" class="btn">Calcular IC</button>
                    </div>
                    <div id="resultado-dos-proporciones" class="result-box" style="display:none;"></div>
                </div>
                
                <!-- CALCULADORA: IC PARA RAZ√ìN DE VARIANZAS -->
                <div id="calc-razon-varianzas" class="calc-section" style="display:none;">
                    <h3>üìê IC para Raz√≥n de Varianzas</h3>
                    <div class="r-box">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                            <div style="grid-column: 1 / -1; background: #e3f2fd; padding: 10px; border-radius: 5px;">
                                <strong>Grupo 1:</strong>
                            </div>
                            <div>
                                <label>n‚ÇÅ:</label>
                                <input type="number" id="n1_var" value="15" min="2" class="calc-input">
                            </div>
                            <div>
                                <label>s‚ÇÅ¬≤ (varianza):</label>
                                <input type="number" id="s1sq_var" value="0.0025" step="0.0001" min="0" class="calc-input">
                            </div>
                            <div style="grid-column: 1 / -1; background: #e8f5e9; padding: 10px; border-radius: 5px; margin-top: 10px;">
                                <strong>Grupo 2:</strong>
                            </div>
                            <div>
                                <label>n‚ÇÇ:</label>
                                <input type="number" id="n2_var" value="12" min="2" class="calc-input">
                            </div>
                            <div>
                                <label>s‚ÇÇ¬≤ (varianza):</label>
                                <input type="number" id="s2sq_var" value="0.0016" step="0.0001" min="0" class="calc-input">
                            </div>
                            <div>
                                <label>Nivel de confianza (%):</label>
                                <select id="confianza_razonvar" class="calc-input">
                                    <option value="0.90">90%</option>
                                    <option value="0.95" selected>95%</option>
                                    <option value="0.99">99%</option>
                                </select>
                            </div>
                        </div>
                        <button onclick="calcularICRazonVarianzas()" class="btn">Calcular IC</button>
                    </div>
                    <div id="resultado-razon-varianzas" class="result-box" style="display:none;"></div>
                </div>
            </div>
        </div>
        
        <div id="python" class="tab-content">
            <div class="card">
                <h2>üêç Intervalos de Confianza con Python</h2>
                
                <h3>üîß Configuraci√≥n Inicial</h3>
                <div class="code-block"><pre><code class="language-python"># Instalar librer√≠as necesarias
# pip install numpy scipy matplotlib pandas

import numpy as np
from scipy import stats
import matplotlib.pyplot as plt
import pandas as pd</code></pre></div>
                
                <h3>üìä IC para la Media de Una Poblaci√≥n</h3>
                <div class="example-box">
                    <h4>Ejemplo: Concentraci√≥n de Prote√≠na</h4>
                    <div class="code-block"><pre><code class="language-python"># ============================================================
# IC PARA UNA MEDIA (œÉ desconocida, distribuci√≥n t)
# ============================================================

# Datos: Concentraci√≥n de insulina recombinante (mg/mL) en 20 lotes
concentracion = np.array([5.1, 5.3, 4.9, 5.2, 5.4, 5.0, 5.3, 5.1, 5.2, 5.4,
                          5.0, 5.3, 5.1, 5.2, 5.5, 5.0, 5.4, 5.2, 5.1, 5.3])

# Estad√≠sticas descriptivas
n = len(concentracion)
media = np.mean(concentracion)
desv_std = np.std(concentracion, ddof=1)  # ddof=1 para muestra
error_std = desv_std / np.sqrt(n)

print("‚ïê"*60)
print("ESTAD√çSTICAS DESCRIPTIVAS")
print("‚ïê"*60)
print(f"Tama√±o de muestra: {n}")
print(f"Media: {media:.3f} mg/mL")
print(f"Desviaci√≥n est√°ndar: {desv_std:.3f} mg/mL")
print(f"Error est√°ndar: {error_std:.3f} mg/mL")

# Calcular IC 95% usando scipy
confianza = 0.95
gl = n - 1
ic = stats.t.interval(confidence=confianza,
                      df=gl,
                      loc=media,
                      scale=error_std)

print(f"\n{'‚ïê'*60}")
print(f"INTERVALO DE CONFIANZA 95%")
print(f"{'‚ïê'*60}")
print(f"IC 95% = [{ic[0]:.3f}, {ic[1]:.3f}] mg/mL")
print(f"Margen de error = ¬±{(ic[1]-ic[0])/2:.3f} mg/mL")

# Visualizaci√≥n
plt.figure(figsize=(12, 5))

# Subplot 1: Distribuci√≥n de datos
plt.subplot(1, 2, 1)
plt.hist(concentracion, bins=8, color='#16a085', alpha=0.7, edgecolor='black')
plt.axvline(media, color='red', linestyle='--', linewidth=2, label=f'Media = {media:.3f}')
plt.axvline(ic[0], color='orange', linestyle=':', linewidth=2, label='IC 95%')
plt.axvline(ic[1], color='orange', linestyle=':', linewidth=2)
plt.xlabel('Concentraci√≥n (mg/mL)', fontsize=12)
plt.ylabel('Frecuencia', fontsize=12)
plt.title('Distribuci√≥n de Concentraciones', fontsize=14, fontweight='bold')
plt.legend()
plt.grid(alpha=0.3)

# Subplot 2: IC visualization
plt.subplot(1, 2, 2)
plt.errorbar(1, media, yerr=(ic[1]-media), 
             fmt='o', markersize=10, color='#16a085',
             elinewidth=3, capsize=10, capthick=3)
plt.xlim(0.5, 1.5)
plt.ylim(ic[0]-0.2, ic[1]+0.2)
plt.ylabel('Concentraci√≥n (mg/mL)', fontsize=12)
plt.title('Intervalo de Confianza 95%', fontsize=14, fontweight='bold')
plt.axhline(media, color='red', linestyle='--', alpha=0.5)
plt.text(1.05, media, f'xÃÑ = {media:.3f}', fontsize=12)
plt.grid(alpha=0.3)
plt.xticks([])

plt.tight_layout()
plt.show()

# Interpretaci√≥n autom√°tica
print(f"\n{'‚ïê'*60}")
print("INTERPRETACI√ìN")
print(f"{'‚ïê'*60}")
print(f"Con {int(confianza*100)}% de confianza, la concentraci√≥n media")
print(f"poblacional de insulina est√° entre {ic[0]:.3f} y {ic[1]:.3f} mg/mL.")</code></pre></div>
                </div>
                
                <h3>üìà IC para una Proporci√≥n</h3>
                <div class="example-box">
                    <h4>Ejemplo: Viabilidad Celular</h4>
                    <div class="code-block"><pre><code class="language-python"># ============================================================
# IC PARA UNA PROPORCI√ìN
# ============================================================

# Datos: Viabilidad celular
n = 200  # C√©lulas examinadas
x = 184  # C√©lulas viables
p_hat = x / n

print("‚ïê"*60)
print("INTERVALO DE CONFIANZA PARA UNA PROPORCI√ìN")
print("‚ïê"*60)
print(f"n = {n} c√©lulas examinadas")
print(f"x = {x} c√©lulas viables")
print(f"pÃÇ = {p_hat:.4f} ({p_hat*100:.2f}%)")

# Verificar condiciones
print(f"\nVerificaci√≥n de condiciones:")
print(f"  n¬∑pÃÇ = {n*p_hat:.1f} {'‚â•' if n*p_hat >= 10 else '<'} 10")
print(f"  n¬∑(1-pÃÇ) = {n*(1-p_hat):.1f} {'‚â•' if n*(1-p_hat) >= 10 else '<'} 10")

# Calcular IC usando m√©todo de Wilson (m√°s robusto)
from statsmodels.stats.proportion import proportion_confint

ic_wilson = proportion_confint(x, n, alpha=0.05, method='wilson')

print(f"\nIC 95% (m√©todo de Wilson):")
print(f"  [{ic_wilson[0]:.4f}, {ic_wilson[1]:.4f}]")
print(f"  [{ic_wilson[0]*100:.2f}%, {ic_wilson[1]*100:.2f}%]")

# M√©todo tradicional (normal)
z_crit = stats.norm.ppf(0.975)  # 1.96
se = np.sqrt(p_hat * (1-p_hat) / n)
me = z_crit * se
ic_normal = (p_hat - me, p_hat + me)

print(f"\nIC 95% (m√©todo normal):")
print(f"  [{ic_normal[0]:.4f}, {ic_normal[1]:.4f}]")
print(f"  [{ic_normal[0]*100:.2f}%, {ic_normal[1]*100:.2f}%]")

# Visualizaci√≥n
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(12, 5))

# Gr√°fico 1: Proporci√≥n con IC
categories = ['No viables', 'Viables']
counts = [n-x, x]
colors = ['#e74c3c', '#16a085']
ax1.bar(categories, counts, color=colors, alpha=0.7, edgecolor='black')
ax1.set_ylabel('N√∫mero de c√©lulas', fontsize=12)
ax1.set_title('Distribuci√≥n de Viabilidad Celular', fontsize=14, fontweight='bold')
ax1.grid(axis='y', alpha=0.3)

# Gr√°fico 2: IC para la proporci√≥n
ax2.errorbar(1, p_hat*100, yerr=(ic_wilson[1]-p_hat)*100,
             fmt='o', markersize=15, color='#16a085',
             elinewidth=4, capsize=15, capthick=4)
ax2.axhline(p_hat*100, color='red', linestyle='--', alpha=0.5)
ax2.set_xlim(0.5, 1.5)
ax2.set_ylim(80, 100)
ax2.set_ylabel('Viabilidad (%)', fontsize=12)
ax2.set_title(f'IC 95% para Viabilidad', fontsize=14, fontweight='bold')
ax2.text(1.05, p_hat*100, f'{p_hat*100:.1f}%', fontsize=12)
ax2.grid(alpha=0.3)
ax2.set_xticks([])

plt.tight_layout()
plt.show()</code></pre></div>
                </div>
                
                <h3>‚öñÔ∏è IC para Diferencia de Dos Medias</h3>
                <div class="example-box">
                    <h4>Ejemplo: Comparaci√≥n de Medios de Cultivo</h4>
                    <div class="code-block"><pre><code class="language-python"># ============================================================
# IC PARA DIFERENCIA DE DOS MEDIAS INDEPENDIENTES
# ============================================================

# Datos: Crecimiento de microalgas en dos medios (OD680)
medio_A = np.array([0.82, 0.88, 0.85, 0.90, 0.84, 0.86, 0.83, 0.87, 0.85, 0.89, 0.84, 0.86])
medio_B = np.array([0.92, 0.98, 0.95, 0.93, 0.96, 0.94, 0.97, 0.91, 0.95, 0.98, 0.92, 0.94, 0.96, 0.95, 0.93])

print("‚ïê"*60)
print("COMPARACI√ìN DE DOS MEDIOS DE CULTIVO")
print("‚ïê"*60)

# Estad√≠sticas de cada grupo
print("\nMedio A (Control):")
print(f"  n = {len(medio_A)}")
print(f"  Media = {np.mean(medio_A):.3f} OD680")
print(f"  SD = {np.std(medio_A, ddof=1):.3f}")

print("\nMedio B (Nuevo):")
print(f"  n = {len(medio_B)}")
print(f"  Media = {np.mean(medio_B):.3f} OD680")
print(f"  SD = {np.std(medio_B, ddof=1):.3f}")

# Prueba de Levene para igualdad de varianzas
stat_levene, p_levene = stats.levene(medio_A, medio_B)
print(f"\nTest de Levene para igualdad de varianzas:")
print(f"  Estad√≠stico = {stat_levene:.3f}")
print(f"  p-valor = {p_levene:.3f}")

if p_levene > 0.05:
    print("  ‚Üí Varianzas iguales (usar pooled t-test)")
    equal_var = True
else:
    print("  ‚Üí Varianzas diferentes (usar Welch t-test)")
    equal_var = False

# Calcular IC para la diferencia de medias
from scipy.stats import ttest_ind

# ttest_ind devuelve IC directamente
resultado = ttest_ind(medio_B, medio_A, equal_var=equal_var)

# Calcular IC manualmente para mostrar el proceso
media_diff = np.mean(medio_B) - np.mean(medio_A)
n1, n2 = len(medio_B), len(medio_A)
s1, s2 = np.std(medio_B, ddof=1), np.std(medio_A, ddof=1)

if equal_var:
    # Varianza pooled
    sp = np.sqrt(((n1-1)*s1**2 + (n2-1)*s2**2) / (n1+n2-2))
    se_diff = sp * np.sqrt(1/n1 + 1/n2)
    gl = n1 + n2 - 2
else:
    # Welch (varianzas diferentes)
    se_diff = np.sqrt(s1**2/n1 + s2**2/n2)
    gl = (s1**2/n1 + s2**2/n2)**2 / ((s1**2/n1)**2/(n1-1) + (s2**2/n2)**2/(n2-1))

t_crit = stats.t.ppf(0.975, gl)
me = t_crit * se_diff
ic = (media_diff - me, media_diff + me)

print(f"\n{'‚ïê'*60}")
print("INTERVALO DE CONFIANZA 95%")
print(f"{'‚ïê'*60}")
print(f"Diferencia de medias (B - A) = {media_diff:.3f} OD680")
print(f"Error est√°ndar = {se_diff:.3f}")
print(f"Grados de libertad = {gl:.1f}")
print(f"Valor cr√≠tico t = {t_crit:.3f}")
print(f"IC 95% = [{ic[0]:.3f}, {ic[1]:.3f}] OD680")

# Interpretaci√≥n
print(f"\n{'‚ïê'*60}")
print("INTERPRETACI√ìN")
print(f"{'‚ïê'*60}")
if ic[0] > 0:
    print(f"‚úì El Medio B es significativamente MEJOR que el Medio A")
    print(f"  (todo el IC est√° por encima de cero)")
elif ic[1] < 0:
    print(f"‚úó El Medio A es significativamente MEJOR que el Medio B")
    print(f"  (todo el IC est√° por debajo de cero)")
else:
    print(f"‚ö† No hay diferencia significativa entre medios")
    print(f"  (el IC incluye el cero)")

# Visualizaci√≥n
fig, axes = plt.subplots(1, 3, figsize=(15, 5))

# Gr√°fico 1: Boxplots comparativos
datos_combinados = [medio_A, medio_B]
axes[0].boxplot(datos_combinados, labels=['Medio A', 'Medio B'],
                patch_artist=True,
                boxprops=dict(facecolor='lightblue', alpha=0.7),
                medianprops=dict(color='red', linewidth=2))
axes[0].set_ylabel('OD680', fontsize=12)
axes[0].set_title('Comparaci√≥n de Crecimiento', fontsize=14, fontweight='bold')
axes[0].grid(axis='y', alpha=0.3)

# Gr√°fico 2: Distribuciones superpuestas
axes[1].hist(medio_A, bins=6, alpha=0.5, color='blue', label='Medio A', edgecolor='black')
axes[1].hist(medio_B, bins=6, alpha=0.5, color='green', label='Medio B', edgecolor='black')
axes[1].set_xlabel('OD680', fontsize=12)
axes[1].set_ylabel('Frecuencia', fontsize=12)
axes[1].set_title('Distribuciones Superpuestas', fontsize=14, fontweight='bold')
axes[1].legend()
axes[1].grid(alpha=0.3)

# Gr√°fico 3: IC para la diferencia
axes[2].errorbar(1, media_diff, yerr=me,
                 fmt='o', markersize=15, color='#16a085',
                 elinewidth=4, capsize=15, capthick=4)
axes[2].axhline(0, color='red', linestyle='--', linewidth=2, label='Diferencia = 0')
axes[2].axhline(media_diff, color='gray', linestyle=':', alpha=0.5)
axes[2].set_xlim(0.5, 1.5)
axes[2].set_ylabel('Diferencia (Medio B - Medio A)', fontsize=12)
axes[2].set_title('IC 95% para Diferencia', fontsize=14, fontweight='bold')
axes[2].legend()
axes[2].grid(alpha=0.3)
axes[2].set_xticks([])

plt.tight_layout()
plt.show()</code></pre></div>
                </div>
                
                <h3>üì¶ Funci√≥n Reutilizable para ICs</h3>
                <div class="code-block"><pre><code class="language-python"># ============================================================
# FUNCI√ìN COMPLETA PARA CALCULAR IC DE UNA MEDIA
# ============================================================

def intervalo_confianza_media(datos, confianza=0.95):
    """
    Calcula el intervalo de confianza para la media usando distribuci√≥n t.
    
    Par√°metros:
    -----------
    datos : array-like
        Vector de datos num√©ricos
    confianza : float
        Nivel de confianza (default: 0.95)
    
    Retorna:
    --------
    dict con claves:
        'media', 'desv_std', 'n', 'ic', 'margen_error'
    """
    datos = np.array(datos)
    n = len(datos)
    media = np.mean(datos)
    desv_std = np.std(datos, ddof=1)
    error_std = desv_std / np.sqrt(n)
    
    # Calcular IC usando distribuci√≥n t
    ic = stats.t.interval(confidence=confianza,
                          df=n-1,
                          loc=media,
                          scale=error_std)
    
    me = (ic[1] - ic[0]) / 2
    
    return {
        'media': media,
        'desv_std': desv_std,
        'n': n,
        'ic': ic,
        'margen_error': me,
        'nivel_confianza': confianza
    }


# Ejemplo de uso
datos_ejemplo = [5.1, 5.3, 4.9, 5.2, 5.4, 5.0, 5.3, 5.1]
resultado = intervalo_confianza_media(datos_ejemplo, confianza=0.95)

print(f"Media: {resultado['media']:.3f}")
print(f"IC 95%: [{resultado['ic'][0]:.3f}, {resultado['ic'][1]:.3f}]")
print(f"Margen de error: ¬±{resultado['margen_error']:.3f}")</code></pre></div>
            </div>
        </div>
        <div id="r" class="tab-content">
            <div class="card">
                <h2>üìä Intervalos de Confianza con R</h2>
                
                <h3>üîß Configuraci√≥n Inicial</h3>
                <div class="code-block"><pre><code class="language-r"># Instalar paquetes necesarios (solo una vez)
install.packages("tidyverse")
install.packages("Rmisc")

# Cargar librer√≠as
library(tidyverse)
library(Rmisc)</code></pre></div>
                
                <h3>üìä IC para la Media de Una Poblaci√≥n</h3>
                <div class="example-box">
                    <h4>Ejemplo: Concentraci√≥n de Glucosa</h4>
                    <div class="code-block"><pre><code class="language-r"># ============================================================
# IC PARA UNA MEDIA EN R
# ============================================================

# Datos: Concentraci√≥n de glucosa (g/L) en biorreactor
glucosa <- c(4.1, 4.3, 4.0, 4.2, 4.4, 4.1, 4.3, 4.2, 4.1, 4.5,
             4.0, 4.3, 4.2, 4.1, 4.4)

# Estad√≠sticas descriptivas
cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n")
cat("ESTAD√çSTICAS DESCRIPTIVAS\n")
cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n")
cat("Tama√±o de muestra:", length(glucosa), "\n")
cat("Media:", mean(glucosa), "g/L\n")
cat("Mediana:", median(glucosa), "g/L\n")
cat("Desviaci√≥n est√°ndar:", sd(glucosa), "g/L\n")
cat("M√≠nimo:", min(glucosa), "g/L\n")
cat("M√°ximo:", max(glucosa), "g/L\n\n")

# Calcular IC 95% usando t.test
resultado <- t.test(glucosa, conf.level = 0.95)

cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n")
cat("INTERVALO DE CONFIANZA 95%\n")
cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n")
cat("IC 95%: [", resultado$conf.int[1], ",", resultado$conf.int[2], "] g/L\n")
cat("Media:", resultado$estimate, "g/L\n")
cat("Margen de error:", (resultado$conf.int[2] - resultado$conf.int[1])/2, "g/L\n\n")

# Verificar normalidad
cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n")
cat("VERIFICACI√ìN DE NORMALIDAD\n")
cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n")
shapiro_test <- shapiro.test(glucosa)
cat("Test de Shapiro-Wilk:\n")
cat("  W =", shapiro_test$statistic, "\n")
cat("  p-valor =", shapiro_test$p.value, "\n")
if (shapiro_test$p.value > 0.05) {
  cat("  ‚úì Los datos son normales (p > 0.05)\n\n")
} else {
  cat("  ‚ö† Los datos NO son normales (p < 0.05)\n\n")
}

# Visualizaci√≥n
par(mfrow = c(1, 3))

# Histograma
hist(glucosa, 
     main = "Distribuci√≥n de Glucosa",
     xlab = "Concentraci√≥n (g/L)",
     ylab = "Frecuencia",
     col = "#16a085",
     border = "white",
     breaks = 8)
abline(v = mean(glucosa), col = "red", lwd = 2, lty = 2)
abline(v = resultado$conf.int[1], col = "orange", lwd = 2, lty = 3)
abline(v = resultado$conf.int[2], col = "orange", lwd = 2, lty = 3)
legend("topright", 
       c("Media", "IC 95%"),
       col = c("red", "orange"),
       lty = c(2, 3),
       lwd = 2)

# Boxplot
boxplot(glucosa,
        main = "Boxplot de Glucosa",
        ylab = "Concentraci√≥n (g/L)",
        col = "lightgreen",
        border = "darkgreen")
abline(h = mean(glucosa), col = "red", lwd = 2, lty = 2)

# Q-Q plot para normalidad
qqnorm(glucosa, main = "Q-Q Plot")
qqline(glucosa, col = "red", lwd = 2)

par(mfrow = c(1, 1))

# Interpretaci√≥n
cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n")
cat("INTERPRETACI√ìN\n")
cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n")
cat("Con 95% de confianza, la concentraci√≥n media de glucosa\n")
cat("en el biorreactor est√° entre", round(resultado$conf.int[1], 3), 
    "y", round(resultado$conf.int[2], 3), "g/L.\n")</code></pre></div>
                </div>
                
                <h3>üìà IC para una Proporci√≥n</h3>
                <div class="example-box">
                    <h4>Ejemplo: Tasa de √âxito en Clonaci√≥n</h4>
                    <div class="code-block"><pre><code class="language-r"># ============================================================
# IC PARA UNA PROPORCI√ìN EN R
# ============================================================

# Datos: Experimento de clonaci√≥n molecular
n <- 150  # N√∫mero de intentos
x <- 123  # Clonaciones exitosas

cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n")
cat("INTERVALO DE CONFIANZA PARA UNA PROPORCI√ìN\n")
cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n")
cat("n =", n, "intentos\n")
cat("x =", x, "√©xitos\n")
cat("pÃÇ =", x/n, sprintf("(%.2f%%)\n", x/n*100))

# Calcular IC usando prop.test
resultado_prop <- prop.test(x, n, conf.level = 0.95)

cat("\nIC 95% para la proporci√≥n:\n")
cat("  Proporci√≥n muestral:", resultado_prop$estimate, "\n")
cat("  IC 95%: [", resultado_prop$conf.int[1], ",", 
    resultado_prop$conf.int[2], "]\n")
cat("  En porcentaje: [", round(resultado_prop$conf.int[1]*100, 2), "%,",
    round(resultado_prop$conf.int[2]*100, 2), "%]\n\n")

# Verificar condiciones
cat("Verificaci√≥n de condiciones:\n")
cat("  n¬∑pÃÇ =", n * x/n, ifelse(n * x/n >= 10, "‚â• 10 ‚úì\n", "< 10 ‚úó\n"))
cat("  n¬∑(1-pÃÇ) =", n * (1-x/n), ifelse(n * (1-x/n) >= 10, "‚â• 10 ‚úì\n", "< 10 ‚úó\n"))

# Visualizaci√≥n
par(mfrow = c(1, 2))

# Gr√°fico de barras
barplot(c(n-x, x),
        names.arg = c("Fallidos", "Exitosos"),
        main = "Resultados de Clonaci√≥n",
        ylab = "Frecuencia",
        col = c("#e74c3c", "#16a085"),
        border = NA)
text(0.7, (n-x)/2, n-x, cex = 1.5, font = 2)
text(1.9, n-x + x/2, x, cex = 1.5, font = 2, col = "white")

# IC visualizado
plot(1, resultado_prop$estimate, 
     xlim = c(0.5, 1.5),
     ylim = c(0.7, 0.95),
     pch = 19,
     cex = 3,
     col = "#16a085",
     xlab = "",
     ylab = "Tasa de √âxito",
     main = "IC 95% para Proporci√≥n",
     xaxt = "n")
arrows(1, resultado_prop$conf.int[1],
       1, resultado_prop$conf.int[2],
       angle = 90,
       code = 3,
       length = 0.15,
       lwd = 3,
       col = "#16a085")
abline(h = resultado_prop$estimate, col = "red", lty = 2)
text(1.1, resultado_prop$estimate, 
     sprintf("%.1f%%", resultado_prop$estimate*100),
     pos = 4, cex = 1.2, font = 2)

par(mfrow = c(1, 1))</code></pre></div>
                </div>
                
                <h3>‚öñÔ∏è IC para Diferencia de Dos Medias</h3>
                <div class="example-box">
                    <h4>Ejemplo: Comparaci√≥n de Tratamientos</h4>
                    <div class="code-block"><pre><code class="language-r"># ============================================================
# IC PARA DIFERENCIA DE DOS MEDIAS EN R
# ============================================================

# Datos: Actividad enzim√°tica (U/mL) con dos tratamientos
tratamiento_A <- c(12.3, 13.1, 12.8, 13.5, 12.6, 13.2, 12.9, 13.4, 12.7, 13.0)
tratamiento_B <- c(14.2, 15.1, 14.6, 15.3, 14.8, 15.0, 14.5, 15.2, 14.9, 15.1)

cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n")
cat("COMPARACI√ìN DE DOS TRATAMIENTOS\n")
cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n")

# Estad√≠sticas de cada grupo
cat("Tratamiento A:\n")
cat("  n =", length(tratamiento_A), "\n")
cat("  Media =", mean(tratamiento_A), "U/mL\n")
cat("  SD =", sd(tratamiento_A), "U/mL\n\n")

cat("Tratamiento B:\n")
cat("  n =", length(tratamiento_B), "\n")
cat("  Media =", mean(tratamiento_B), "U/mL\n")
cat("  SD =", sd(tratamiento_B), "U/mL\n\n")

# Test de Levene para igualdad de varianzas
library(car)
datos_combinados <- data.frame(
  valor = c(tratamiento_A, tratamiento_B),
  grupo = factor(c(rep("A", length(tratamiento_A)), 
                   rep("B", length(tratamiento_B))))
)

levene_test <- leveneTest(valor ~ grupo, data = datos_combinados)
cat("Test de Levene para igualdad de varianzas:\n")
cat("  F =", levene_test$`F value`[1], "\n")
cat("  p-valor =", levene_test$`Pr(>F)`[1], "\n")

if (levene_test$`Pr(>F)`[1] > 0.05) {
  cat("  ‚Üí Varianzas iguales (usar var.equal = TRUE)\n\n")
  usar_pooled <- TRUE
} else {
  cat("  ‚Üí Varianzas diferentes (usar var.equal = FALSE, Welch)\n\n")
  usar_pooled <- FALSE
}

# Calcular IC para diferencia de medias
resultado_ttest <- t.test(tratamiento_B, tratamiento_A, 
                           var.equal = usar_pooled,
                           conf.level = 0.95)

cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n")
cat("INTERVALO DE CONFIANZA 95%\n")
cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n")
cat("Diferencia de medias (B - A):", resultado_ttest$estimate[1] - resultado_ttest$estimate[2], "U/mL\n")
cat("IC 95%: [", resultado_ttest$conf.int[1], ",", resultado_ttest$conf.int[2], "] U/mL\n")
cat("Estad√≠stico t:", resultado_ttest$statistic, "\n")
cat("p-valor:", resultado_ttest$p.value, "\n\n")

# Interpretaci√≥n
cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n")
cat("INTERPRETACI√ìN\n")
cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n")
if (resultado_ttest$conf.int[1] > 0) {
  cat("‚úì El Tratamiento B es significativamente MEJOR que A\n")
  cat("  (todo el IC est√° por encima de cero)\n")
} else if (resultado_ttest$conf.int[2] < 0) {
  cat("‚úó El Tratamiento A es significativamente MEJOR que B\n")
  cat("  (todo el IC est√° por debajo de cero)\n")
} else {
  cat("‚ö† No hay diferencia significativa entre tratamientos\n")
  cat("  (el IC incluye el cero)\n")
}

# Visualizaci√≥n comparativa
par(mfrow = c(1, 3))

# Boxplots lado a lado
boxplot(tratamiento_A, tratamiento_B,
        names = c("Tratamiento A", "Tratamiento B"),
        main = "Comparaci√≥n de Tratamientos",
        ylab = "Actividad Enzim√°tica (U/mL)",
        col = c("#3498db", "#16a085"),
        border = "darkgray",
        notch = TRUE)

# Histogramas superpuestos
hist(tratamiento_A, 
     col = rgb(0.2, 0.5, 0.8, 0.5),
     main = "Distribuciones Superpuestas",
     xlab = "Actividad (U/mL)",
     breaks = 5,
     xlim = range(c(tratamiento_A, tratamiento_B)))
hist(tratamiento_B, 
     col = rgb(0.1, 0.6, 0.5, 0.5),
     add = TRUE,
     breaks = 5)
legend("topright",
       c("Tratamiento A", "Tratamiento B"),
       fill = c(rgb(0.2, 0.5, 0.8, 0.5), rgb(0.1, 0.6, 0.5, 0.5)))

# IC para la diferencia
diff_medias <- mean(tratamiento_B) - mean(tratamiento_A)
plot(1, diff_medias,
     xlim = c(0.5, 1.5),
     ylim = c(resultado_ttest$conf.int[1] - 0.2, 
              resultado_ttest$conf.int[2] + 0.2),
     pch = 19,
     cex = 3,
     col = "#16a085",
     main = "IC 95% para Diferencia",
     ylab = "Diferencia (B - A) en U/mL",
     xlab = "",
     xaxt = "n")
arrows(1, resultado_ttest$conf.int[1],
       1, resultado_ttest$conf.int[2],
       angle = 90,
       code = 3,
       length = 0.15,
       lwd = 3,
       col = "#16a085")
abline(h = 0, col = "red", lty = 2, lwd = 2)
abline(h = diff_medias, col = "gray", lty = 3)
text(1.1, diff_medias, sprintf("%.2f", diff_medias), pos = 4, font = 2)

par(mfrow = c(1, 1))</code></pre></div>
                </div>
                
                <h3>üì¶ Funci√≥n Personalizada para ICs en R</h3>
                <div class="code-block"><pre><code class="language-r"># ============================================================
# FUNCI√ìN REUTILIZABLE PARA IC DE UNA MEDIA
# ============================================================

calcular_ic_media <- function(datos, confianza = 0.95) {
  # Validaci√≥n
  if (!is.numeric(datos)) {
    stop("Los datos deben ser num√©ricos")
  }
  
  n <- length(datos)
  media <- mean(datos)
  desv_std <- sd(datos)
  error_std <- desv_std / sqrt(n)
  
  # Calcular IC usando distribuci√≥n t
  alpha <- 1 - confianza
  t_crit <- qt(1 - alpha/2, df = n-1)
  margen_error <- t_crit * error_std
  
  ic_inferior <- media - margen_error
  ic_superior <- media + margen_error
  
  # Crear objeto de resultados
  resultado <- list(
    n = n,
    media = media,
    desv_std = desv_std,
    error_std = error_std,
    nivel_confianza = confianza,
    ic_inferior = ic_inferior,
    ic_superior = ic_superior,
    margen_error = margen_error,
    t_critico = t_crit
  )
  
  # Imprimir resumen
  cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n")
  cat("INTERVALO DE CONFIANZA PARA LA MEDIA\n")
  cat("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n")
  cat("Tama√±o de muestra:", n, "\n")
  cat("Media:", round(media, 4), "\n")
  cat("Desviaci√≥n est√°ndar:", round(desv_std, 4), "\n")
  cat(sprintf("IC %.0f%%: [%.4f, %.4f]\n", confianza*100, ic_inferior, ic_superior))
  cat("Margen de error: ¬±", round(margen_error, 4), "\n")
  
  return(invisible(resultado))
}

# Ejemplo de uso
datos_prueba <- c(5.1, 5.3, 4.9, 5.2, 5.4, 5.0, 5.3, 5.1)
resultado <- calcular_ic_media(datos_prueba, confianza = 0.95)</code></pre></div>
                </div>
            </div>
        </div>
        
        <div id="biotech" class="tab-content">
            <div class="card">
                <h2>üî¨ Aplicaci√≥n Integral en Biotecnolog√≠a</h2>
                
                <h3>üß¨ Caso de Estudio: Optimizaci√≥n de Producci√≥n de Enzimas</h3>
                <div class="example-box">
                    <h4>Contexto del Problema:</h4>
                    <p>Una empresa biotecnol√≥gica desarrolla una amilasa industrial usando <em>Bacillus subtilis</em>. El departamento de I+D investiga si un nuevo medio de cultivo (Medio B) mejora la actividad enzim√°tica comparado con el medio est√°ndar (Medio A).</p>
                    
                    <h4>Objetivos:</h4>
                    <ul>
                        <li>Estimar la actividad enzim√°tica media con cada medio (IC 95%)</li>
                        <li>Comparar ambos medios y cuantificar la diferencia (IC 95%)</li>
                        <li>Evaluar la viabilidad celular en el Medio B</li>
                    </ul>
                </div>
                
                <h3>üìä Datos Experimentales</h3>
                <div class="r-box">
                    <p><strong>Experimento 1:</strong> Actividad de amilasa (U/mL) despu√©s de 48h de fermentaci√≥n</p>
                    <ul>
                        <li><strong>Medio A (control):</strong> 15 fermentaciones</li>
                        <li><strong>Medio B (nuevo):</strong> 15 fermentaciones</li>
                    </ul>
                    
                    <p><strong>Experimento 2:</strong> Viabilidad celular en Medio B</p>
                    <ul>
                        <li>250 c√©lulas examinadas, 232 viables</li>
                    </ul>
                </div>
                
                <h3>üíª An√°lisis Completo en Python</h3>
                <div class="code-block"><pre><code class="language-python">import numpy as np
from scipy import stats
import matplotlib.pyplot as plt

# ============================================================
# EXPERIMENTO 1: COMPARACI√ìN DE MEDIOS
# ============================================================

# Datos de actividad enzim√°tica (U/mL)
medio_A = np.array([45.2, 47.1, 46.3, 48.0, 45.8, 47.5, 46.1, 47.8, 45.9, 
                    47.2, 46.5, 47.9, 45.7, 47.3, 46.8])
medio_B = np.array([52.1, 54.3, 53.2, 55.1, 52.8, 54.0, 53.5, 54.8, 52.5,
                    54.2, 53.8, 54.6, 52.9, 54.4, 53.3])

print("‚ïê"*70)
print("AN√ÅLISIS DE PRODUCCI√ìN DE AMILASA")
print("‚ïê"*70)

# IC para Medio A
n_A = len(medio_A)
media_A = np.mean(medio_A)
sd_A = np.std(medio_A, ddof=1)
se_A = sd_A / np.sqrt(n_A)
ic_A = stats.t.interval(0.95, n_A-1, media_A, se_A)

print(f"\nMedio A (Control):")
print(f"  n = {n_A}")
print(f"  Media = {media_A:.2f} U/mL")
print(f"  SD = {sd_A:.2f} U/mL")
print(f"  IC 95% = [{ic_A[0]:.2f}, {ic_A[1]:.2f}] U/mL")

# IC para Medio B
n_B = len(medio_B)
media_B = np.mean(medio_B)
sd_B = np.std(medio_B, ddof=1)
se_B = sd_B / np.sqrt(n_B)
ic_B = stats.t.interval(0.95, n_B-1, media_B, se_B)

print(f"\nMedio B (Nuevo):")
print(f"  n = {n_B}")
print(f"  Media = {media_B:.2f} U/mL")
print(f"  SD = {sd_B:.2f} U/mL")
print(f"  IC 95% = [{ic_B[0]:.2f}, {ic_B[1]:.2f}] U/mL")

# IC para diferencia
t_result = stats.ttest_ind(medio_B, medio_A)
diff_media = media_B - media_A
se_diff = np.sqrt(sd_A**2/n_A + sd_B**2/n_B)
gl_welch = (sd_A**2/n_A + sd_B**2/n_B)**2 / ((sd_A**2/n_A)**2/(n_A-1) + (sd_B**2/n_B)**2/(n_B-1))
t_crit = stats.t.ppf(0.975, gl_welch)
me_diff = t_crit * se_diff
ic_diff = (diff_media - me_diff, diff_media + me_diff)

print(f"\nDiferencia (B - A):")
print(f"  Diferencia = {diff_media:.2f} U/mL")
print(f"  IC 95% = [{ic_diff[0]:.2f}, {ic_diff[1]:.2f}] U/mL")
print(f"  Incremento relativo = {(diff_media/media_A)*100:.1f}%")

# ============================================================
# EXPERIMENTO 2: VIABILIDAD CELULAR
# ============================================================

n_celulas = 250
viables = 232
p_hat = viables / n_celulas

print(f"\n{'‚ïê'*70}")
print("AN√ÅLISIS DE VIABILIDAD CELULAR EN MEDIO B")
print("‚ïê"*70)
print(f"\nC√©lulas examinadas: {n_celulas}")
print(f"C√©lulas viables: {viables}")
print(f"Proporci√≥n muestral: {p_hat:.4f} ({p_hat*100:.2f}%)")

# IC para proporci√≥n
z_crit = 1.96
se_prop = np.sqrt(p_hat * (1-p_hat) / n_celulas)
me_prop = z_crit * se_prop
ic_prop = (p_hat - me_prop, p_hat + me_prop)

print(f"IC 95% = [{ic_prop[0]:.4f}, {ic_prop[1]:.4f}]")
print(f"En porcentaje = [{ic_prop[0]*100:.2f}%, {ic_prop[1]*100:.2f}%]")

# ============================================================
# VISUALIZACI√ìN INTEGRADA
# ============================================================

fig = plt.figure(figsize=(15, 10))

# Subplot 1: Comparaci√≥n de medios
ax1 = plt.subplot(2, 3, 1)
bp = ax1.boxplot([medio_A, medio_B], labels=['Medio A', 'Medio B'],
                  patch_artist=True)
bp['boxes'][0].set_facecolor('#3498db')
bp['boxes'][1].set_facecolor('#16a085')
ax1.set_ylabel('Actividad (U/mL)', fontsize=12)
ax1.set_title('Comparaci√≥n de Actividad Enzim√°tica', fontsize=14, fontweight='bold')
ax1.grid(axis='y', alpha=0.3)

# Subplot 2: IC para Medio A
ax2 = plt.subplot(2, 3, 2)
ax2.errorbar(1, media_A, yerr=(ic_A[1]-media_A), fmt='o', markersize=12,
             color='#3498db', elinewidth=3, capsize=10, capthick=3)
ax2.set_xlim(0.5, 1.5)
ax2.set_ylabel('Actividad (U/mL)', fontsize=12)
ax2.set_title('IC 95% - Medio A', fontsize=14, fontweight='bold')
ax2.set_xticks([])
ax2.grid(alpha=0.3)
ax2.text(1.1, media_A, f'{media_A:.1f}', fontsize=11)

# Subplot 3: IC para Medio B
ax3 = plt.subplot(2, 3, 3)
ax3.errorbar(1, media_B, yerr=(ic_B[1]-media_B), fmt='o', markersize=12,
             color='#16a085', elinewidth=3, capsize=10, capthick=3)
ax3.set_xlim(0.5, 1.5)
ax3.set_ylabel('Actividad (U/mL)', fontsize=12)
ax3.set_title('IC 95% - Medio B', fontsize=14, fontweight='bold')
ax3.set_xticks([])
ax3.grid(alpha=0.3)
ax3.text(1.1, media_B, f'{media_B:.1f}', fontsize=11)

# Subplot 4: IC para diferencia
ax4 = plt.subplot(2, 3, 4)
ax4.errorbar(1, diff_media, yerr=me_diff, fmt='o', markersize=15,
             color='#e67e22', elinewidth=4, capsize=15, capthick=4)
ax4.axhline(0, color='red', linestyle='--', linewidth=2, label='Diferencia = 0')
ax4.set_xlim(0.5, 1.5)
ax4.set_ylabel('Diferencia (U/mL)', fontsize=12)
ax4.set_title('IC 95% para Diferencia (B-A)', fontsize=14, fontweight='bold')
ax4.legend()
ax4.set_xticks([])
ax4.grid(alpha=0.3)

# Subplot 5: Viabilidad
ax5 = plt.subplot(2, 3, 5)
categories = ['No viables', 'Viables']
counts = [n_celulas-viables, viables]
colors = ['#e74c3c', '#27ae60']
ax5.bar(categories, counts, color=colors, alpha=0.7)
ax5.set_ylabel('N√∫mero de c√©lulas', fontsize=12)
ax5.set_title('Viabilidad Celular', fontsize=14, fontweight='bold')
ax5.grid(axis='y', alpha=0.3)

# Subplot 6: IC para viabilidad
ax6 = plt.subplot(2, 3, 6)
ax6.errorbar(1, p_hat*100, yerr=(ic_prop[1]-p_hat)*100, fmt='o', markersize=15,
             color='#27ae60', elinewidth=4, capsize=15, capthick=4)
ax6.set_xlim(0.5, 1.5)
ax6.set_ylim(88, 98)
ax6.set_ylabel('Viabilidad (%)', fontsize=12)
ax6.set_title('IC 95% para Viabilidad', fontsize=14, fontweight='bold')
ax6.set_xticks([])
ax6.grid(alpha=0.3)
ax6.text(1.1, p_hat*100, f'{p_hat*100:.1f}%', fontsize=11)

plt.tight_layout()
plt.savefig('analisis_biotech_completo.png', dpi=300, bbox_inches='tight')
plt.show()

# ============================================================
# CONCLUSIONES
# ============================================================

print(f"\n{'‚ïê'*70}")
print("CONCLUSIONES Y RECOMENDACIONES")
print("‚ïê"*70)
print(f"\n1. ACTIVIDAD ENZIM√ÅTICA:")
print(f"   ‚Ä¢ Medio A: {media_A:.2f} U/mL (IC: {ic_A[0]:.2f}-{ic_A[1]:.2f})")
print(f"   ‚Ä¢ Medio B: {media_B:.2f} U/mL (IC: {ic_B[0]:.2f}-{ic_B[1]:.2f})")
print(f"   ‚Ä¢ Incremento: +{diff_media:.2f} U/mL ({(diff_media/media_A)*100:.1f}%)")
print(f"   ‚úì CONCLUSI√ìN: Medio B es significativamente mejor")

print(f"\n2. VIABILIDAD CELULAR:")
print(f"   ‚Ä¢ Viabilidad: {p_hat*100:.2f}% (IC: {ic_prop[0]*100:.2f}%-{ic_prop[1]*100:.2f}%)")
print(f"   ‚úì CONCLUSI√ìN: Excelente viabilidad celular")

print(f"\n3. RECOMENDACI√ìN FINAL:")
print(f"   ‚úì Implementar Medio B para producci√≥n industrial")
print(f"   ‚úì Esperado incremento de productividad: ~{(diff_media/media_A)*100:.0f}%")
print(f"   ‚úì Mantener monitoreo de viabilidad celular > 90%")</code></pre></div>
                
                <h3>üìà Interpretaci√≥n y Toma de Decisiones</h3>
                <div class="r-box">
                    <h4>An√°lisis de Resultados:</h4>
                    <p><strong>1. Actividad Enzim√°tica:</strong></p>
                    <ul>
                        <li>El Medio B muestra una actividad significativamente mayor (~15% de incremento)</li>
                        <li>Los intervalos de confianza no se solapan, indicando diferencia real</li>
                        <li>La diferencia es tanto estad√≠stica como pr√°cticamente significativa</li>
                    </ul>
                    
                    <p><strong>2. Viabilidad Celular:</strong></p>
                    <ul>
                        <li>La viabilidad > 90% es excelente para aplicaciones industriales</li>
                        <li>El IC estrecho indica consistencia del proceso</li>
                        <li>Cumple con est√°ndares de la industria biotecnol√≥gica</li>
                    </ul>
                    
                    <p><strong>3. Recomendaci√≥n:</strong></p>
                    <p>‚úì <strong>Implementar el Medio B</strong> para la producci√≥n industrial, ya que:</p>
                    <ul>
                        <li>Aumenta significativamente la actividad enzim√°tica</li>
                        <li>Mantiene alta viabilidad celular</li>
                        <li>Los intervalos de confianza proporcionan estimaciones precisas para planificaci√≥n</li>
                    </ul>
                </div>
                
                <h3>üí° Aplicaciones Adicionales en Biotecnolog√≠a</h3>
                <table>
                    <thead>
                        <tr><th>Aplicaci√≥n</th><th>Par√°metro a Estimar</th><th>Tipo de IC</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>Purificaci√≥n de prote√≠nas</td><td>Pureza media (%)</td><td>IC para media</td></tr>
                        <tr><td>PCR cuantitativo</td><td>Concentraci√≥n DNA</td><td>IC para media</td></tr>
                        <tr><td>Ensayos de citotoxicidad</td><td>IC‚ÇÖ‚ÇÄ</td><td>IC para media</td></tr>
                        <tr><td>Eficacia de vacunas</td><td>Tasa de respuesta inmune</td><td>IC para proporci√≥n</td></tr>
                        <tr><td>Comparaci√≥n de cepas</td><td>Diferencia en rendimiento</td><td>IC para diferencia</td></tr>
                        <tr><td>Control de calidad</td><td>Tasa de contaminaci√≥n</td><td>IC para proporci√≥n</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <script>
        function openTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            // Resaltar c√≥digo cuando se abren tabs de Python o R
            if (tabName === 'python' || tabName === 'r') {
                setTimeout(() => {
                    document.querySelectorAll('pre code').forEach((block) => {
                        hljs.highlightElement(block);
                    });
                }, 100);
            }
        }
        
        // ============================================================
        // FUNCIONES DE LA CALCULADORA
        // ============================================================
        
        function cambiarTipoIC() {
            const tipo = document.getElementById('tipoIC').value;
            
            // Ocultar todas las secciones
            document.querySelectorAll('.calc-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // Mostrar la secci√≥n seleccionada
            document.getElementById('calc-' + tipo).style.display = 'block';
        }
        
        // Funci√≥n auxiliar: Calcular valor cr√≠tico t
        function tCritico(gl, alpha) {
            // Aproximaci√≥n de t cr√≠tico usando distribuci√≥n normal para gl grandes
            // Para gl peque√±os, valores predefinidos
            const tTable = {
                1: {0.10: 6.314, 0.05: 12.706, 0.01: 63.657},
                2: {0.10: 2.920, 0.05: 4.303, 0.01: 9.925},
                3: {0.10: 2.353, 0.05: 3.182, 0.01: 5.841},
                4: {0.10: 2.132, 0.05: 2.776, 0.01: 4.604},
                5: {0.10: 2.015, 0.05: 2.571, 0.01: 4.032},
                10: {0.10: 1.812, 0.05: 2.228, 0.01: 3.169},
                15: {0.10: 1.753, 0.05: 2.131, 0.01: 2.947},
                20: {0.10: 1.725, 0.05: 2.086, 0.01: 2.845},
                25: {0.10: 1.708, 0.05: 2.060, 0.01: 2.787},
                30: {0.10: 1.697, 0.05: 2.042, 0.01: 2.750}
            };
            
            // Buscar valor m√°s cercano
            if (gl >= 30) {
                // Usar z para gl grandes
                if (alpha === 0.10) return 1.645;
                if (alpha === 0.05) return 1.960;
                if (alpha === 0.01) return 2.576;
            }
            
            // Buscar en tabla
            const glKeys = Object.keys(tTable).map(Number).sort((a, b) => a - b);
            let glCercano = glKeys[0];
            for (let key of glKeys) {
                if (Math.abs(key - gl) < Math.abs(glCercano - gl)) {
                    glCercano = key;
                }
            }
            
            return tTable[glCercano][alpha];
        }
        
        // Funci√≥n auxiliar: Calcular valor cr√≠tico z
        function zCritico(alpha) {
            if (alpha === 0.10) return 1.645;
            if (alpha === 0.05) return 1.960;
            if (alpha === 0.01) return 2.576;
            return 1.960; // default 95%
        }
        
        // Funci√≥n auxiliar: Calcular valor cr√≠tico F
        function fCritico(gl1, gl2, alpha) {
            // Tabla simplificada de F cr√≠ticos (approximaci√≥n)
            // Para uso educativo, valores aproximados
            const fTable = {
                '10,10': {0.05: 2.98, 0.025: 3.72, 0.005: 5.85},
                '12,12': {0.05: 2.69, 0.025: 3.28, 0.005: 4.91},
                '15,15': {0.05: 2.48, 0.025: 2.96, 0.005: 4.25},
                '14,11': {0.05: 2.57, 0.025: 3.09, 0.005: 4.46},
                '20,20': {0.05: 2.12, 0.025: 2.46, 0.005: 3.32}
            };
            
            // Buscar combinaci√≥n m√°s cercana o usar aproximaci√≥n
            const key = gl1 + ',' + gl2;
            if (fTable[key] && fTable[key][alpha]) {
                return fTable[key][alpha];
            }
            
            // Aproximaci√≥n general
            if (alpha === 0.025) return 3.0;
            if (alpha === 0.05) return 2.5;
            if (alpha === 0.005) return 4.5;
            return 2.5;
        }
        
        // ============================================================
        // CALCULAR IC PARA UNA MEDIA
        // ============================================================
        function calcularICMedia() {
            const n = parseFloat(document.getElementById('n_media').value);
            const xbar = parseFloat(document.getElementById('xbar_media').value);
            const s = parseFloat(document.getElementById('s_media').value);
            const confianza = parseFloat(document.getElementById('confianza_media').value);
            
            // Validaciones
            if (n < 2 || s <= 0) {
                alert('‚ö†Ô∏è Valores inv√°lidos. Verifica que n ‚â• 2 y s > 0');
                return;
            }
            
            const alpha = 1 - confianza;
            const gl = n - 1;
            const t = tCritico(gl, alpha);
            const se = s / Math.sqrt(n);
            const me = t * se;
            const ic_inf = xbar - me;
            const ic_sup = xbar + me;
            
            // Mostrar resultados
            let html = `
                <h3>üìä Resultados del IC para la Media</h3>
                <div class="example-box">
                    <h4>Datos Ingresados:</h4>
                    <ul>
                        <li>Tama√±o de muestra: n = ${n}</li>
                        <li>Media muestral: xÃÑ = ${xbar.toFixed(4)}</li>
                        <li>Desviaci√≥n est√°ndar: s = ${s.toFixed(4)}</li>
                        <li>Nivel de confianza: ${(confianza*100).toFixed(0)}%</li>
                    </ul>
                </div>
                
                <div class="formula-box">
                    <h4>C√°lculos:</h4>
                    <p><strong>Grados de libertad:</strong> gl = n - 1 = ${gl}</p>
                    <p><strong>Valor cr√≠tico:</strong> t<sub>${gl}, ${(alpha/2).toFixed(3)}</sub> = ${t.toFixed(3)}</p>
                    <p><strong>Error est√°ndar:</strong> SE = s/‚àön = ${s.toFixed(4)}/‚àö${n} = ${se.toFixed(4)}</p>
                    <p><strong>Margen de error:</strong> ME = t √ó SE = ${t.toFixed(3)} √ó ${se.toFixed(4)} = ${me.toFixed(4)}</p>
                </div>
                
                <div class="result-box" style="background: linear-gradient(135deg, #16a08520 0%, #0e6b5d20 100%); border: 3px solid var(--bio-color);">
                    <h3 style="color: var(--bio-color); margin-bottom: 15px;">‚úÖ Intervalo de Confianza ${(confianza*100).toFixed(0)}%:</h3>
                    <p style="font-size: 1.4em; font-weight: bold; text-align: center; margin: 20px 0;">
                        IC = [${ic_inf.toFixed(4)}, ${ic_sup.toFixed(4)}]
                    </p>
                    <p style="text-align: center;">Margen de error: ¬±${me.toFixed(4)}</p>
                </div>
                
                <div class="r-box">
                    <h4>üìù Interpretaci√≥n:</h4>
                    <p>Con <strong>${(confianza*100).toFixed(0)}% de confianza</strong>, la media poblacional est√° entre <strong>${ic_inf.toFixed(4)}</strong> y <strong>${ic_sup.toFixed(4)}</strong>.</p>
                </div>
            `;
            
            document.getElementById('resultado-una-media').innerHTML = html;
            document.getElementById('resultado-una-media').style.display = 'block';
        }
        
        // ============================================================
        // CALCULAR IC PARA UNA PROPORCI√ìN
        // ============================================================
        function calcularICProporcion() {
            const n = parseFloat(document.getElementById('n_prop').value);
            const x = parseFloat(document.getElementById('x_prop').value);
            const confianza = parseFloat(document.getElementById('confianza_prop').value);
            
            // Validaciones
            if (n < 30 || x < 0 || x > n) {
                alert('‚ö†Ô∏è Valores inv√°lidos. Verifica que n ‚â• 30 y 0 ‚â§ x ‚â§ n');
                return;
            }
            
            const p_hat = x / n;
            const alpha = 1 - confianza;
            const z = zCritico(alpha);
            
            // Verificar condiciones
            const cond1 = n * p_hat;
            const cond2 = n * (1 - p_hat);
            const condiciones_ok = cond1 >= 10 && cond2 >= 10;
            
            const se = Math.sqrt(p_hat * (1 - p_hat) / n);
            const me = z * se;
            const ic_inf = Math.max(0, p_hat - me);
            const ic_sup = Math.min(1, p_hat + me);
            
            // Mostrar resultados
            let html = `
                <h3>üìà Resultados del IC para una Proporci√≥n</h3>
                <div class="example-box">
                    <h4>Datos Ingresados:</h4>
                    <ul>
                        <li>Tama√±o de muestra: n = ${n}</li>
                        <li>N√∫mero de √©xitos: x = ${x}</li>
                        <li>Proporci√≥n muestral: pÃÇ = ${p_hat.toFixed(4)} (${(p_hat*100).toFixed(2)}%)</li>
                        <li>Nivel de confianza: ${(confianza*100).toFixed(0)}%</li>
                    </ul>
                </div>
                
                <div class="${condiciones_ok ? 'example-box' : 'note-box'}" style="border-left-color: ${condiciones_ok ? '#4caf50' : '#f39c12'};">
                    <h4>‚úì Verificaci√≥n de Condiciones:</h4>
                    <ul>
                        <li>n¬∑pÃÇ = ${n} √ó ${p_hat.toFixed(4)} = ${cond1.toFixed(1)} ${cond1 >= 10 ? '‚â• 10 ‚úì' : '< 10 ‚úó'}</li>
                        <li>n¬∑(1-pÃÇ) = ${n} √ó ${(1-p_hat).toFixed(4)} = ${cond2.toFixed(1)} ${cond2 >= 10 ? '‚â• 10 ‚úì' : '< 10 ‚úó'}</li>
                    </ul>
                    ${!condiciones_ok ? '<p style="color: #f39c12; font-weight: bold;">‚ö†Ô∏è Advertencia: No se cumplen las condiciones. El IC puede no ser confiable.</p>' : ''}
                </div>
                
                <div class="formula-box">
                    <h4>C√°lculos:</h4>
                    <p><strong>Valor cr√≠tico:</strong> z<sub>${(alpha/2).toFixed(3)}</sub> = ${z.toFixed(3)}</p>
                    <p><strong>Error est√°ndar:</strong> SE = ‚àö[pÃÇ(1-pÃÇ)/n] = ‚àö[${p_hat.toFixed(4)} √ó ${(1-p_hat).toFixed(4)} / ${n}] = ${se.toFixed(4)}</p>
                    <p><strong>Margen de error:</strong> ME = z √ó SE = ${z.toFixed(3)} √ó ${se.toFixed(4)} = ${me.toFixed(4)}</p>
                </div>
                
                <div class="result-box" style="background: linear-gradient(135deg, #16a08520 0%, #0e6b5d20 100%); border: 3px solid var(--bio-color);">
                    <h3 style="color: var(--bio-color); margin-bottom: 15px;">‚úÖ Intervalo de Confianza ${(confianza*100).toFixed(0)}%:</h3>
                    <p style="font-size: 1.4em; font-weight: bold; text-align: center; margin: 20px 0;">
                        IC = [${ic_inf.toFixed(4)}, ${ic_sup.toFixed(4)}]
                    </p>
                    <p style="text-align: center; font-size: 1.2em;">
                        [${(ic_inf*100).toFixed(2)}%, ${(ic_sup*100).toFixed(2)}%]
                    </p>
                </div>
                
                <div class="r-box">
                    <h4>üìù Interpretaci√≥n:</h4>
                    <p>Con <strong>${(confianza*100).toFixed(0)}% de confianza</strong>, la proporci√≥n poblacional est√° entre <strong>${(ic_inf*100).toFixed(2)}%</strong> y <strong>${(ic_sup*100).toFixed(2)}%</strong>.</p>
                </div>
            `;
            
            document.getElementById('resultado-una-proporcion').innerHTML = html;
            document.getElementById('resultado-una-proporcion').style.display = 'block';
        }
        
        // ============================================================
        // CALCULAR IC PARA DIFERENCIA DE DOS MEDIAS
        // ============================================================
        function calcularICDosMedias() {
            const n1 = parseFloat(document.getElementById('n1_medias').value);
            const xbar1 = parseFloat(document.getElementById('xbar1_medias').value);
            const s1 = parseFloat(document.getElementById('s1_medias').value);
            const n2 = parseFloat(document.getElementById('n2_medias').value);
            const xbar2 = parseFloat(document.getElementById('xbar2_medias').value);
            const s2 = parseFloat(document.getElementById('s2_medias').value);
            const confianza = parseFloat(document.getElementById('confianza_dosmedias').value);
            
            // Validaciones
            if (n1 < 2 || n2 < 2 || s1 <= 0 || s2 <= 0) {
                alert('‚ö†Ô∏è Valores inv√°lidos. Verifica que n‚ÇÅ,n‚ÇÇ ‚â• 2 y s‚ÇÅ,s‚ÇÇ > 0');
                return;
            }
            
            const alpha = 1 - confianza;
            const diff = xbar2 - xbar1;
            
            // Usar m√©todo de Welch (varianzas potencialmente diferentes)
            const se_diff = Math.sqrt(s1*s1/n1 + s2*s2/n2);
            
            // Grados de libertad de Welch
            const num = Math.pow(s1*s1/n1 + s2*s2/n2, 2);
            const den = Math.pow(s1*s1/n1, 2)/(n1-1) + Math.pow(s2*s2/n2, 2)/(n2-1);
            const gl_welch = num / den;
            
            const t = tCritico(Math.floor(gl_welch), alpha);
            const me = t * se_diff;
            const ic_inf = diff - me;
            const ic_sup = diff + me;
            
            // Determinar interpretaci√≥n
            let interpretacion = '';
            if (ic_inf > 0) {
                interpretacion = '‚úÖ El Grupo 2 tiene media significativamente MAYOR que Grupo 1 (todo el IC > 0)';
            } else if (ic_sup < 0) {
                interpretacion = '‚úÖ El Grupo 1 tiene media significativamente MAYOR que Grupo 2 (todo el IC < 0)';
            } else {
                interpretacion = '‚ö†Ô∏è No hay diferencia significativa entre grupos (el IC incluye el cero)';
            }
            
            let html = `
                <h3>‚öñÔ∏è Resultados del IC para Diferencia de Dos Medias</h3>
                <div class="example-box">
                    <h4>Datos Ingresados:</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div>
                            <strong>Grupo 1:</strong>
                            <ul>
                                <li>n‚ÇÅ = ${n1}</li>
                                <li>xÃÑ‚ÇÅ = ${xbar1.toFixed(4)}</li>
                                <li>s‚ÇÅ = ${s1.toFixed(4)}</li>
                            </ul>
                        </div>
                        <div>
                            <strong>Grupo 2:</strong>
                            <ul>
                                <li>n‚ÇÇ = ${n2}</li>
                                <li>xÃÑ‚ÇÇ = ${xbar2.toFixed(4)}</li>
                                <li>s‚ÇÇ = ${s2.toFixed(4)}</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="formula-box">
                    <h4>C√°lculos (M√©todo de Welch):</h4>
                    <p><strong>Diferencia de medias:</strong> xÃÑ‚ÇÇ - xÃÑ‚ÇÅ = ${xbar2.toFixed(4)} - ${xbar1.toFixed(4)} = ${diff.toFixed(4)}</p>
                    <p><strong>Error est√°ndar:</strong> SE = ‚àö(s‚ÇÅ¬≤/n‚ÇÅ + s‚ÇÇ¬≤/n‚ÇÇ) = ${se_diff.toFixed(4)}</p>
                    <p><strong>Grados de libertad (Welch):</strong> ŒΩ ‚âà ${gl_welch.toFixed(1)}</p>
                    <p><strong>Valor cr√≠tico:</strong> t<sub>${Math.floor(gl_welch)}, ${(alpha/2).toFixed(3)}</sub> ‚âà ${t.toFixed(3)}</p>
                    <p><strong>Margen de error:</strong> ME = ${t.toFixed(3)} √ó ${se_diff.toFixed(4)} = ${me.toFixed(4)}</p>
                </div>
                
                <div class="result-box" style="background: linear-gradient(135deg, #16a08520 0%, #0e6b5d20 100%); border: 3px solid var(--bio-color);">
                    <h3 style="color: var(--bio-color); margin-bottom: 15px;">‚úÖ Intervalo de Confianza ${(confianza*100).toFixed(0)}%:</h3>
                    <p style="font-size: 1.4em; font-weight: bold; text-align: center; margin: 20px 0;">
                        IC = [${ic_inf.toFixed(4)}, ${ic_sup.toFixed(4)}]
                    </p>
                </div>
                
                <div class="r-box">
                    <h4>üìù Interpretaci√≥n:</h4>
                    <p>${interpretacion}</p>
                    <p>Con ${(confianza*100).toFixed(0)}% de confianza, la diferencia entre medias (Œº‚ÇÇ - Œº‚ÇÅ) est√° entre <strong>${ic_inf.toFixed(4)}</strong> y <strong>${ic_sup.toFixed(4)}</strong>.</p>
                </div>
            `;
            
            document.getElementById('resultado-dos-medias').innerHTML = html;
            document.getElementById('resultado-dos-medias').style.display = 'block';
        }
        
        // ============================================================
        // CALCULAR IC PARA DIFERENCIA DE DOS PROPORCIONES
        // ============================================================
        function calcularICDosProporciones() {
            const n1 = parseFloat(document.getElementById('n1_prop').value);
            const x1 = parseFloat(document.getElementById('x1_prop').value);
            const n2 = parseFloat(document.getElementById('n2_prop').value);
            const x2 = parseFloat(document.getElementById('x2_prop').value);
            const confianza = parseFloat(document.getElementById('confianza_dosprop').value);
            
            // Validaciones
            if (n1 < 30 || n2 < 30 || x1 < 0 || x2 < 0 || x1 > n1 || x2 > n2) {
                alert('‚ö†Ô∏è Valores inv√°lidos. Verifica que n‚ÇÅ,n‚ÇÇ ‚â• 30 y 0 ‚â§ x ‚â§ n');
                return;
            }
            
            const p1 = x1 / n1;
            const p2 = x2 / n2;
            const diff = p2 - p1;
            
            // Verificar condiciones
            const cond1_1 = n1 * p1;
            const cond1_2 = n1 * (1 - p1);
            const cond2_1 = n2 * p2;
            const cond2_2 = n2 * (1 - p2);
            const condiciones_ok = cond1_1 >= 10 && cond1_2 >= 10 && cond2_1 >= 10 && cond2_2 >= 10;
            
            const alpha = 1 - confianza;
            const z = zCritico(alpha);
            const se = Math.sqrt(p1*(1-p1)/n1 + p2*(1-p2)/n2);
            const me = z * se;
            const ic_inf = diff - me;
            const ic_sup = diff + me;
            
            // Interpretaci√≥n
            let interpretacion = '';
            if (ic_inf > 0) {
                interpretacion = '‚úÖ El Grupo 2 tiene proporci√≥n significativamente MAYOR que Grupo 1';
            } else if (ic_sup < 0) {
                interpretacion = '‚úÖ El Grupo 1 tiene proporci√≥n significativamente MAYOR que Grupo 2';
            } else {
                interpretacion = '‚ö†Ô∏è No hay diferencia significativa entre grupos (el IC incluye el cero)';
            }
            
            let html = `
                <h3>üìâ Resultados del IC para Diferencia de Proporciones</h3>
                <div class="example-box">
                    <h4>Datos Ingresados:</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div>
                            <strong>Grupo 1:</strong>
                            <ul>
                                <li>n‚ÇÅ = ${n1}</li>
                                <li>x‚ÇÅ = ${x1}</li>
                                <li>pÃÇ‚ÇÅ = ${p1.toFixed(4)} (${(p1*100).toFixed(2)}%)</li>
                            </ul>
                        </div>
                        <div>
                            <strong>Grupo 2:</strong>
                            <ul>
                                <li>n‚ÇÇ = ${n2}</li>
                                <li>x‚ÇÇ = ${x2}</li>
                                <li>pÃÇ‚ÇÇ = ${p2.toFixed(4)} (${(p2*100).toFixed(2)}%)</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="${condiciones_ok ? 'example-box' : 'note-box'}">
                    <h4>‚úì Verificaci√≥n de Condiciones:</h4>
                    <ul>
                        <li>Grupo 1: n‚ÇÅ¬∑pÃÇ‚ÇÅ = ${cond1_1.toFixed(1)} ${cond1_1 >= 10 ? '‚úì' : '‚úó'}, n‚ÇÅ¬∑(1-pÃÇ‚ÇÅ) = ${cond1_2.toFixed(1)} ${cond1_2 >= 10 ? '‚úì' : '‚úó'}</li>
                        <li>Grupo 2: n‚ÇÇ¬∑pÃÇ‚ÇÇ = ${cond2_1.toFixed(1)} ${cond2_1 >= 10 ? '‚úì' : '‚úó'}, n‚ÇÇ¬∑(1-pÃÇ‚ÇÇ) = ${cond2_2.toFixed(1)} ${cond2_2 >= 10 ? '‚úì' : '‚úó'}</li>
                    </ul>
                </div>
                
                <div class="formula-box">
                    <h4>C√°lculos:</h4>
                    <p><strong>Diferencia:</strong> pÃÇ‚ÇÇ - pÃÇ‚ÇÅ = ${p2.toFixed(4)} - ${p1.toFixed(4)} = ${diff.toFixed(4)} (${(diff*100).toFixed(2)}%)</p>
                    <p><strong>Error est√°ndar:</strong> SE = ${se.toFixed(4)}</p>
                    <p><strong>Valor cr√≠tico:</strong> z<sub>${(alpha/2).toFixed(3)}</sub> = ${z.toFixed(3)}</p>
                    <p><strong>Margen de error:</strong> ME = ${me.toFixed(4)}</p>
                </div>
                
                <div class="result-box" style="background: linear-gradient(135deg, #16a08520 0%, #0e6b5d20 100%); border: 3px solid var(--bio-color);">
                    <h3 style="color: var(--bio-color); margin-bottom: 15px;">‚úÖ Intervalo de Confianza ${(confianza*100).toFixed(0)}%:</h3>
                    <p style="font-size: 1.4em; font-weight: bold; text-align: center; margin: 20px 0;">
                        IC = [${ic_inf.toFixed(4)}, ${ic_sup.toFixed(4)}]
                    </p>
                    <p style="text-align: center; font-size: 1.2em;">
                        [${(ic_inf*100).toFixed(2)}%, ${(ic_sup*100).toFixed(2)}%]
                    </p>
                </div>
                
                <div class="r-box">
                    <h4>üìù Interpretaci√≥n:</h4>
                    <p>${interpretacion}</p>
                </div>
            `;
            
            document.getElementById('resultado-dos-proporciones').innerHTML = html;
            document.getElementById('resultado-dos-proporciones').style.display = 'block';
        }
        
        // ============================================================
        // CALCULAR IC PARA RAZ√ìN DE VARIANZAS
        // ============================================================
        function calcularICRazonVarianzas() {
            const n1 = parseFloat(document.getElementById('n1_var').value);
            const s1sq = parseFloat(document.getElementById('s1sq_var').value);
            const n2 = parseFloat(document.getElementById('n2_var').value);
            const s2sq = parseFloat(document.getElementById('s2sq_var').value);
            const confianza = parseFloat(document.getElementById('confianza_razonvar').value);
            
            // Validaciones
            if (n1 < 2 || n2 < 2 || s1sq <= 0 || s2sq <= 0) {
                alert('‚ö†Ô∏è Valores inv√°lidos. Verifica que n‚ÇÅ,n‚ÇÇ ‚â• 2 y s‚ÇÅ¬≤,s‚ÇÇ¬≤ > 0');
                return;
            }
            
            const alpha = 1 - confianza;
            const F_obs = s1sq / s2sq;
            const gl1 = n1 - 1;
            const gl2 = n2 - 1;
            
            // Valores cr√≠ticos F
            const F_upper = fCritico(gl1, gl2, alpha/2);
            const F_lower = 1 / fCritico(gl2, gl1, alpha/2);
            
            // IC para raz√≥n
            const ic_inf = F_obs / F_upper;
            const ic_sup = F_obs / F_lower;
            
            // Interpretaci√≥n
            let interpretacion = '';
            if (ic_inf > 1) {
                interpretacion = '‚úÖ El Grupo 1 tiene significativamente MAYOR variabilidad que Grupo 2';
            } else if (ic_sup < 1) {
                interpretacion = '‚úÖ El Grupo 2 tiene significativamente MAYOR variabilidad que Grupo 1';
            } else {
                interpretacion = '‚ö†Ô∏è No hay diferencia significativa en variabilidad (el IC incluye 1)';
            }
            
            let html = `
                <h3>üìê Resultados del IC para Raz√≥n de Varianzas</h3>
                <div class="example-box">
                    <h4>Datos Ingresados:</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div>
                            <strong>Grupo 1:</strong>
                            <ul>
                                <li>n‚ÇÅ = ${n1}</li>
                                <li>s‚ÇÅ¬≤ = ${s1sq.toFixed(6)}</li>
                                <li>s‚ÇÅ = ${Math.sqrt(s1sq).toFixed(4)}</li>
                            </ul>
                        </div>
                        <div>
                            <strong>Grupo 2:</strong>
                            <ul>
                                <li>n‚ÇÇ = ${n2}</li>
                                <li>s‚ÇÇ¬≤ = ${s2sq.toFixed(6)}</li>
                                <li>s‚ÇÇ = ${Math.sqrt(s2sq).toFixed(4)}</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="formula-box">
                    <h4>C√°lculos (Distribuci√≥n F):</h4>
                    <p><strong>Raz√≥n observada:</strong> F<sub>obs</sub> = s‚ÇÅ¬≤/s‚ÇÇ¬≤ = ${s1sq.toFixed(6)}/${s2sq.toFixed(6)} = ${F_obs.toFixed(4)}</p>
                    <p><strong>Grados de libertad:</strong> gl‚ÇÅ = ${gl1}, gl‚ÇÇ = ${gl2}</p>
                    <p><strong>F cr√≠tico superior:</strong> F<sub>${gl1},${gl2},${(alpha/2).toFixed(3)}</sub> ‚âà ${F_upper.toFixed(3)}</p>
                    <p><strong>F cr√≠tico inferior:</strong> F<sub>${gl1},${gl2},${(1-alpha/2).toFixed(3)}</sub> ‚âà ${F_lower.toFixed(3)}</p>
                </div>
                
                <div class="result-box" style="background: linear-gradient(135deg, #16a08520 0%, #0e6b5d20 100%); border: 3px solid var(--bio-color);">
                    <h3 style="color: var(--bio-color); margin-bottom: 15px;">‚úÖ Intervalo de Confianza ${(confianza*100).toFixed(0)}%:</h3>
                    <p style="font-size: 1.4em; font-weight: bold; text-align: center; margin: 20px 0;">
                        IC para œÉ‚ÇÅ¬≤/œÉ‚ÇÇ¬≤ = [${ic_inf.toFixed(3)}, ${ic_sup.toFixed(3)}]
                    </p>
                </div>
                
                <div class="r-box">
                    <h4>üìù Interpretaci√≥n:</h4>
                    <p>${interpretacion}</p>
                    <p>Con ${(confianza*100).toFixed(0)}% de confianza, la raz√≥n de varianzas poblacionales (œÉ‚ÇÅ¬≤/œÉ‚ÇÇ¬≤) est√° entre <strong>${ic_inf.toFixed(3)}</strong> y <strong>${ic_sup.toFixed(3)}</strong>.</p>
                    <p><strong>Aplicaci√≥n:</strong> ${ic_inf > 1 ? 'El Grupo 2 es m√°s preciso/consistente.' : ic_sup < 1 ? 'El Grupo 1 es m√°s preciso/consistente.' : 'Ambos grupos tienen variabilidad comparable.'}</p>
                </div>
            `;
            
            document.getElementById('resultado-razon-varianzas').innerHTML = html;
            document.getElementById('resultado-razon-varianzas').style.display = 'block';
        }
        
        // Inicializar resaltado de sintaxis al cargar la p√°gina
        window.onload = function() {
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightElement(block);
            });
        };
    </script>
</body>
</html>
